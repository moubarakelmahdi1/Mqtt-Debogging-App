{"remainingRequest":"C:\\WEB\\WLDD_hiveMQ\\node_modules\\babel-loader\\lib\\index.js!C:\\WEB\\WLDD_hiveMQ\\node_modules\\vuetify-loader\\lib\\loader.js!C:\\WEB\\WLDD_hiveMQ\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\WEB\\WLDD_hiveMQ\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\WEB\\WLDD_hiveMQ\\src\\components\\Selector.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\WEB\\WLDD_hiveMQ\\src\\components\\Selector.vue","mtime":1561466042605},{"path":"C:\\WEB\\WLDD_hiveMQ\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\WEB\\WLDD_hiveMQ\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\WEB\\WLDD_hiveMQ\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1549812933000},{"path":"C:\\WEB\\WLDD_hiveMQ\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\WEB\\WLDD_hiveMQ\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.array.sort\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { config } from '@/assets/js/Utils.js';\nimport axios from 'axios';\nexport default {\n  name: 'Selector',\n  props: {\n    'demonstrations': Array,\n    'deletePopUp': Boolean,\n    'editPopUp': Boolean,\n    'selectedActionIndex': Number,\n    'showBtn': Number,\n    'actionPanel': Number,\n    'userGroups': Array\n  },\n  data: function data() {\n    return {\n      selected: null,\n      showActionPanel: null,\n      demoIndex: null,\n      actionIndex: this.selectedActionIndex,\n      deleteModal: this.deletePopUp,\n      editModal: this.editPopUp,\n      showButtons: this.showBtn,\n      editDemoPopUp: 0,\n      newDemoName: '',\n      userGroupList: '',\n      deleteDemoPopUp: 0,\n      toImportDemo: '',\n      importConfirmation: 0,\n      userGroupInEdit: this.userGroups\n    };\n  },\n  watch: {\n    selected: function selected() {\n      var _this = this;\n\n      this.$emit('selected', this.selected);\n      this.$emit('showActionPanel', this.showActionPanel);\n\n      if (this.selected != null) {\n        this.demonstrations.forEach(function (element) {\n          if (element.id == _this.selected.id) {\n            _this.demoIndex = _this.demonstrations.indexOf(element);\n          }\n        });\n        this.updateCheckBoxes();\n      }\n\n      this.$emit('selectedDemoIndex', this.demoIndex);\n    },\n    showActionPanel: function showActionPanel() {\n      this.$emit('showActionPanel', this.showActionPanel);\n    },\n    deletePopUp: function deletePopUp() {\n      this.deleteModal = this.deletePopUp;\n    },\n    deleteModal: function deleteModal() {\n      this.$emit('deletePopUp', this.deleteModal);\n    },\n    editPopUp: function editPopUp() {\n      this.editModal = this.editPopUp;\n    },\n    editModal: function editModal() {\n      this.$emit('editPopUp', this.editModal);\n    },\n    showButtons: function showButtons() {\n      this.$emit('showBtn', this.showButtons);\n    },\n    showBtn: function showBtn() {\n      this.showButtons = this.showBtn;\n    },\n    actionIndex: function actionIndex() {\n      this.$emit('selectedActionIndex', this.actionIndex);\n    },\n    selectedActionIndex: function selectedActionIndex() {\n      this.actionIndex = this.selectedActionIndex;\n    },\n    userGroups: function userGroups() {\n      this.userGroupInEdit = this.userGroups;\n    }\n  },\n  methods: {\n    updateCheckBoxes: function updateCheckBoxes() {\n      var _this2 = this;\n\n      this.demonstrations[this.demoIndex].user.forEach(function (element) {\n        _this2.userGroupInEdit.forEach(function (e) {\n          if (element.id == e.id) {\n            document.getElementById(e.id + 10).checked = true;\n            e.isSelected = true;\n          }\n        });\n      });\n    },\n    atInput: function atInput() {\n      this.showActionPanel = 0;\n      this.actionIndex = null;\n      this.showButtons = 0;\n    },\n    changeSorting: function changeSorting(direction) {\n      var _this3 = this;\n\n      var temp = null;\n\n      if (direction == 'left') {\n        temp = this.demonstrations[this.demoIndex].action[this.actionIndex - 1];\n      } else if (direction == 'right') {\n        temp = this.demonstrations[this.demoIndex].action[this.actionIndex + 1];\n      }\n\n      axios.post(config.baseLink + '/action/editActionSorting?actionId=' + this.demonstrations[this.demoIndex].action[this.actionIndex].id + '&permutedActionId=' + temp.id + '&actionSort=' + this.demonstrations[this.demoIndex].action[this.actionIndex].sort + '&permutedActionSort=' + temp.sort).then(function (responses) {\n        _this3.$parent.update();\n\n        if (direction == 'left') {\n          _this3.actionIndex = _this3.actionIndex - 1;\n        } else if (direction == 'right') {\n          _this3.actionIndex = _this3.actionIndex + 1;\n        }\n      }, function (response) {\n        console.log('erreur', response);\n      });\n    },\n    showEditDemoPopUp: function showEditDemoPopUp() {\n      if (this.selected != null) {\n        this.newDemoName = this.demonstrations[this.demoIndex].name;\n        this.editDemoPopUp = 1;\n      }\n    },\n    cancelEditDemoPopUp: function cancelEditDemoPopUp() {\n      this.editDemoPopUp = 0;\n      this.newDemoName = '';\n      this.$parent.update();\n      this.updateCheckBoxes();\n    },\n    editDemo: function editDemo() {\n      var _this4 = this;\n\n      if (this.newDemoName.length > 0) {\n        this.userGroups.forEach(function (userGroup) {\n          if (userGroup.isSelected == true) {\n            _this4.userGroupList = _this4.userGroupList + userGroup.id + '|';\n            userGroup.isSelected = false;\n          }\n        });\n\n        if (this.userGroupList.length > 0) {\n          axios.post(config.baseLink + '/demo/editDemo?demoId=' + this.demonstrations[this.demoIndex].id + '&name=' + encodeURI(this.newDemoName) + '&userGroupsIds=' + encodeURI(this.userGroupList)).then(function (responses) {\n            _this4.$parent.update();\n\n            _this4.userGroupList = '';\n            _this4.selected = null;\n\n            _this4.cancelEditDemoPopUp();\n          }, function (response) {\n            console.log('erreur', response);\n          });\n        } else {\n          alert('Select demonstration user groups!');\n        }\n      } else {\n        alert('Fill demonstration name!');\n      }\n    },\n    showDeleteDemoPopUp: function showDeleteDemoPopUp() {\n      if (this.selected != null) {\n        this.deleteDemoPopUp = 1;\n      }\n    },\n    deleteDemo: function deleteDemo() {\n      var _this5 = this;\n\n      axios.post(config.baseLink + '/demo/deleteDemo?demoId=' + this.demonstrations[this.demoIndex].id).then(function (responses) {\n        _this5.$parent.update();\n\n        _this5.selected = null;\n        _this5.deleteDemoPopUp = 0;\n        _this5.editDemoPopUp = 0;\n      }, function (response) {\n        console.log('erreur', response);\n      });\n    },\n    exportDemo: function exportDemo() {\n      var _this6 = this;\n\n      axios.get(config.baseLink + '/demo/getDemo?demoId=' + this.demonstrations[this.demoIndex].id).then(function (responses) {\n        var jsonDemo = responses.data;\n        delete jsonDemo.id;\n        jsonDemo.action.forEach(function (element) {\n          delete element.id;\n          element.parametersTopics.forEach(function (element) {\n            return delete element.id;\n          });\n          element.parametersMessages.forEach(function (element) {\n            return delete element.id;\n          });\n        });\n        var dataStr = JSON.stringify(jsonDemo);\n        var dataUri = 'data:application/json;charset=utf-8,' + encodeURIComponent(dataStr);\n        var exportFileDefaultName = _this6.demonstrations[_this6.demoIndex].name + '.json';\n        var linkElement = document.createElement('a');\n        linkElement.setAttribute('href', dataUri);\n        linkElement.setAttribute('download', exportFileDefaultName);\n        linkElement.click();\n      }, function (response) {\n        console.log('erreur', response);\n      });\n    },\n    importDemo: function importDemo(event) {\n      var reader = new FileReader();\n\n      reader.onload = function (event) {\n        var _this7 = this;\n\n        var jsonObj = JSON.parse(event.target.result);\n        axios.post(config.baseLink + '/demo/importDemo?demoJson=' + encodeURI(JSON.stringify(jsonObj))).then(function (responses) {\n          _this7.$parent.update();\n\n          _this7.importConfirmation = 0;\n        }, function (response) {\n          console.log('erreur', response);\n        });\n      };\n\n      reader.readAsText(event.target.files[0]);\n      event.target.value = '';\n      this.importConfirmation = 1;\n      this.$parent.update();\n    }\n  }\n};",{"version":3,"sources":["Selector.vue"],"names":[],"mappings":"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","sourcesContent":["<!--Drop down menu to select the demonstration-->\r\n<template>\r\n    <v-flex md3 offset-md1>\r\n        <v-select solo\r\n                  v-model=\"selected\"\r\n                  :items=\"demonstrations\"\r\n                  item-text=\"name\"\r\n                  label=\"Demonstrations\"\r\n                  class=\"strongTexts\"\r\n                  return-object\r\n                  @input=\"atInput()\"\r\n                  prepend-icon=\"build\"\r\n                  @click:prepend=\"showEditDemoPopUp()\"\r\n        ></v-select>\r\n\r\n        <div v-if=\"selectedActionIndex!=null&&showButtons&&actionPanel!=null&&demonstrations[demoIndex].action.length>0\" class=\"editButtons\">\r\n            <v-btn\r\n                    small class=\"button\"\r\n                   color=rgba(0,103,160,1)\r\n                   @click=\"editModal=true\">\r\n                <div class=\"button\">EDIT</div>\r\n            </v-btn>\r\n\r\n            <v-btn small class=\"button\"\r\n                   color=rgba(0,103,160,1)\r\n                   @click=\"deleteModal=true\">\r\n                <div class=\"button\">DELETE</div>\r\n            </v-btn>\r\n        </div>\r\n\r\n        <br>\r\n\r\n        <div v-if=\"selectedActionIndex!=null&&showButtons&&actionPanel!=null&&demonstrations[demoIndex].action.length>0\" class=\"editButtons\">\r\n            <v-btn  v-if=\"actionIndex!=0\"\r\n                    small\r\n                    color=rgba(0,103,160,1)\r\n                    @click=\"changeSorting('left')\">\r\n                <div class=\"button\"><</div>\r\n            </v-btn>\r\n\r\n            <v-btn  v-else\r\n                    disabled\r\n                    small>\r\n                <div class=\"button\"><</div>\r\n            </v-btn>\r\n\r\n\r\n            <v-btn  v-if=\"actionIndex<demonstrations[demoIndex].action.length-1\"\r\n                    small class=\"button\"\r\n                    color=rgba(0,103,160,1)\r\n                    @click=\"changeSorting('right')\">\r\n                <div class=\"button\">></div>\r\n            </v-btn>\r\n\r\n            <v-btn  v-else\r\n                    disabled\r\n                    small>\r\n                <div class=\"button\">></div>\r\n            </v-btn>\r\n        </div>\r\n\r\n        <v-dialog\r\n                v-model=\"editDemoPopUp\"\r\n                width=\"700\"\r\n                persistent=\"\">\r\n            <template v-slot:activator=\"{ on }\">\r\n\r\n            </template>\r\n\r\n            <v-card>\r\n                <v-card-title  class=\"headline grey lighten-2\"\r\n                               primary-title>\r\n                    <div class=\"edit\" v-if=\"selected!=null\">\r\n                        Edit demonstration : {{demonstrations[demoIndex].name}}\r\n                    </div>\r\n                    <v-spacer></v-spacer>\r\n                    <div class=\"edit\">Import</div>\r\n                    <v-btn fab small color=\"rgba(0,103,160,1)\" @click=\"$refs.inputUpload.click()\">\r\n\r\n                        <v-icon color=\"white\">\r\n                            cloud_upload\r\n                        </v-icon>\r\n                    </v-btn>\r\n                    <input type=\"file\"\r\n                           ref=\"inputUpload\"\r\n                           id=\"jsonDemo\" name=\"jsonDemo\"\r\n                           accept=\".json\"\r\n                           v-show=\"false\"\r\n                           @change=\"importDemo($event)\">\r\n\r\n                    <div class=\"edit\">Export</div>\r\n                    <v-btn fab small color=\"rgba(0,103,160,1)\" @click=\"exportDemo()\">\r\n                        <v-icon color=\"white\">\r\n                            cloud_download\r\n                        </v-icon>\r\n                    </v-btn>\r\n                    <div class=\"edit\">Delete</div>\r\n                    <v-btn fab small color=\"rgba(0,103,160,1)\" @click=\"showDeleteDemoPopUp()\">\r\n                        <v-icon color=\"white\">\r\n                            remove\r\n                        </v-icon>\r\n                    </v-btn>\r\n                </v-card-title>\r\n\r\n                <v-form @submit.prevent>\r\n                    <v-text-field\r\n                            label=\"Demonstration Name\"\r\n                            v-model=\"newDemoName\"\r\n                            box>\r\n                    </v-text-field>\r\n\r\n                    <div class=\"userGroups\">\r\n                        <v-flex v-for=\"userGroup in userGroupInEdit\" offset-md1 offset-xs1>\r\n                            <!--Checkboxes to select certain topics-->\r\n                            <input @click=\"userGroup.isSelected=!userGroup.isSelected\" type=\"checkbox\" :id=\"userGroup.id+10\" class=\"checkboxesInSelector\">\r\n                            <div slot=\"label\">\r\n                                {{userGroup.name}}\r\n                            </div>\r\n                        </v-flex>\r\n                    </div>\r\n\r\n                    <v-card-actions>\r\n                        <v-btn color=\"primary\"\r\n                               flat\r\n                               @click=\"cancelEditDemoPopUp()\">\r\n                            Cancel\r\n                        </v-btn>\r\n\r\n                        <v-spacer></v-spacer>\r\n\r\n                        <v-btn  color=\"primary\"\r\n                                flat\r\n                                @click=\"editDemo()\">\r\n                            Save\r\n                        </v-btn>\r\n                    </v-card-actions>\r\n                </v-form>\r\n            </v-card>\r\n        </v-dialog>\r\n\r\n        <v-dialog v-model=\"deleteDemoPopUp\"\r\n                  width=\"550\">\r\n            <template v-slot:activator=\"{ on }\">\r\n\r\n            </template>\r\n\r\n            <v-card>\r\n                <v-card-title  class=\"headline grey lighten-2\"\r\n                               primary-title>\r\n                    WARNING : Are you sure to delete the demonstration :\r\n                </v-card-title>\r\n\r\n                <v-card-actions>\r\n                    <v-btn\r\n                            color=\"primary\"\r\n                            flat\r\n                            @click=\"deleteDemoPopUp=0\">\r\n                        NO\r\n                    </v-btn>\r\n\r\n                    <v-spacer></v-spacer>\r\n                    <v-btn\r\n                            color=\"primary\"\r\n                            flat\r\n                            @click=\"deleteDemo()\">\r\n                        YES\r\n                    </v-btn>\r\n                </v-card-actions>\r\n            </v-card>\r\n        </v-dialog>\r\n\r\n        <v-dialog v-model=\"importConfirmation\"\r\n                  width=\"550\">\r\n            <template v-slot:activator=\"{ on }\">\r\n\r\n            </template>\r\n\r\n            <v-card>\r\n                <v-card-title  class=\"headline grey lighten-2\"\r\n                               primary-title>\r\n                    Demonstration Imported!\r\n                </v-card-title>\r\n\r\n                <v-card-actions>\r\n                    <v-btn\r\n                            color=\"primary\"\r\n                            flat\r\n                            @click=\"importConfirmation=0\">\r\n                        Close\r\n                    </v-btn>\r\n                </v-card-actions>\r\n            </v-card>\r\n        </v-dialog>\r\n    </v-flex>\r\n</template>\r\n\r\n<script>\r\n    import {config} from '@/assets/js/Utils.js';\r\n    import axios from 'axios';\r\n    export default {\r\n        name: 'Selector',\r\n        props:{\r\n            'demonstrations':Array,\r\n            'deletePopUp' : Boolean,\r\n            'editPopUp' : Boolean,\r\n            'selectedActionIndex' : Number,\r\n            'showBtn' : Number,\r\n            'actionPanel' : Number,\r\n            'userGroups' : Array,\r\n        },\r\n        data: function () {\r\n            return {\r\n                selected : null,\r\n                showActionPanel:null,\r\n                demoIndex : null,\r\n                actionIndex : this.selectedActionIndex,\r\n                deleteModal:this.deletePopUp,\r\n                editModal : this.editPopUp,\r\n                showButtons : this.showBtn,\r\n                editDemoPopUp : 0,\r\n                newDemoName : '',\r\n                userGroupList : '',\r\n                deleteDemoPopUp : 0,\r\n                toImportDemo : '',\r\n                importConfirmation : 0,\r\n                userGroupInEdit : this.userGroups,\r\n            }\r\n        },\r\n        watch:{\r\n            selected(){\r\n                this.$emit('selected',this.selected);\r\n                this.$emit('showActionPanel',this.showActionPanel);\r\n                if(this.selected!=null){\r\n                    this.demonstrations.forEach(element =>{\r\n                        if(element.id==this.selected.id)\r\n                        {\r\n                            this.demoIndex = this.demonstrations.indexOf(element);\r\n                        }\r\n                    })\r\n                    this.updateCheckBoxes();\r\n                }\r\n                this.$emit('selectedDemoIndex',this.demoIndex);\r\n            },\r\n            showActionPanel(){\r\n                this.$emit('showActionPanel',this.showActionPanel);\r\n            },\r\n            deletePopUp:function(){\r\n                this.deleteModal = this.deletePopUp;\r\n            },\r\n            deleteModal:function(){\r\n                this.$emit('deletePopUp',this.deleteModal);\r\n            },\r\n            editPopUp:function(){\r\n                this.editModal = this.editPopUp;\r\n            },\r\n            editModal:function(){\r\n                this.$emit('editPopUp',this.editModal);\r\n            },\r\n            showButtons:function(){\r\n                this.$emit('showBtn',this.showButtons);\r\n            },\r\n            showBtn:function(){\r\n                this.showButtons = this.showBtn;\r\n            },\r\n            actionIndex:function(){\r\n                this.$emit('selectedActionIndex',this.actionIndex);\r\n            },\r\n            selectedActionIndex:function(){\r\n                this.actionIndex=this.selectedActionIndex;\r\n            },\r\n            userGroups:function(){\r\n                this.userGroupInEdit = this.userGroups;\r\n            }\r\n        },\r\n        methods: {\r\n            updateCheckBoxes(){\r\n              this.demonstrations[this.demoIndex].user.forEach(element => {\r\n                  this.userGroupInEdit.forEach(e =>{\r\n                      if(element.id == e.id){\r\n                          document.getElementById(e.id+10).checked=true;\r\n                          e.isSelected = true;\r\n                      }\r\n                  })\r\n              })\r\n            },\r\n            atInput() {\r\n                this.showActionPanel = 0;\r\n                this.actionIndex = null;\r\n                this.showButtons = 0;\r\n            },\r\n            changeSorting(direction) {\r\n                var temp = null;\r\n                if(direction=='left'){\r\n                    temp = this.demonstrations[this.demoIndex].action[this.actionIndex-1];\r\n                }\r\n                else if(direction=='right'){\r\n                    temp = this.demonstrations[this.demoIndex].action[this.actionIndex+1];\r\n                }\r\n                axios\r\n                    .post(config.baseLink+'/action/editActionSorting?actionId='+this.demonstrations[this.demoIndex].action[this.actionIndex].id+'&permutedActionId='+temp.id+'&actionSort='+this.demonstrations[this.demoIndex].action[this.actionIndex].sort+'&permutedActionSort='+temp.sort)\r\n                    .then((responses) =>{\r\n                        this.$parent.update();\r\n                        if(direction=='left'){\r\n                            this.actionIndex = this.actionIndex-1;\r\n                        }\r\n                        else if(direction=='right'){\r\n                            this.actionIndex = this.actionIndex+1;\r\n                        }\r\n                    }, (response)=>{\r\n                        console.log('erreur',response)\r\n                    })\r\n            },\r\n            showEditDemoPopUp(){\r\n                if(this.selected!=null){\r\n                    this.newDemoName = this.demonstrations[this.demoIndex].name;\r\n                    this.editDemoPopUp = 1 ;\r\n                }\r\n            },\r\n            cancelEditDemoPopUp(){\r\n                this.editDemoPopUp = 0;\r\n                this.newDemoName = '';\r\n                this.$parent.update();\r\n                this.updateCheckBoxes();\r\n            },\r\n            editDemo() {\r\n                if(this.newDemoName.length>0)\r\n                {\r\n                    this.userGroups.forEach(userGroup => {\r\n                        if (userGroup.isSelected == true) {\r\n                            this.userGroupList = this.userGroupList + userGroup.id + '|';\r\n                            userGroup.isSelected = false;\r\n                        }\r\n                    })\r\n                    if(this.userGroupList.length>0)\r\n                    {\r\n                        axios\r\n                            .post(config.baseLink + '/demo/editDemo?demoId='+this.demonstrations[this.demoIndex].id+'&name='+encodeURI(this.newDemoName)+'&userGroupsIds='+encodeURI(this.userGroupList))\r\n                            .then((responses) => {\r\n                                this.$parent.update();\r\n                                this.userGroupList = '';\r\n                                this.selected=null;\r\n                                this.cancelEditDemoPopUp();\r\n                            }, (response) => {\r\n                                console.log('erreur', response)\r\n                            })\r\n                    }\r\n                    else {\r\n                        alert('Select demonstration user groups!')\r\n                    }\r\n\r\n                }\r\n                else{\r\n                    alert('Fill demonstration name!')\r\n                }\r\n            },\r\n            showDeleteDemoPopUp(){\r\n                if(this.selected!=null){\r\n                    this.deleteDemoPopUp = 1;\r\n                }\r\n            },\r\n            deleteDemo(){\r\n                axios\r\n                    .post(config.baseLink + '/demo/deleteDemo?demoId=' + this.demonstrations[this.demoIndex].id)\r\n                    .then((responses) => {\r\n                        this.$parent.update();\r\n                        this.selected = null;\r\n                        this.deleteDemoPopUp = 0;\r\n                        this.editDemoPopUp = 0;\r\n                    }, (response) => {\r\n                        console.log('erreur', response)\r\n                    })\r\n            },\r\n            exportDemo(){\r\n                axios\r\n                    .get(config.baseLink +'/demo/getDemo?demoId='+ this.demonstrations[this.demoIndex].id)\r\n                    .then((responses) => {\r\n                        let jsonDemo = responses.data;\r\n                        delete jsonDemo.id;\r\n                        jsonDemo.action.forEach(element =>{\r\n                            delete element.id;\r\n                            element.parametersTopics.forEach(element => delete element.id)\r\n                            element.parametersMessages.forEach(element => delete element.id)\r\n                        });\r\n                        let dataStr = JSON.stringify(jsonDemo);\r\n                        let dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);\r\n                        let exportFileDefaultName = this.demonstrations[this.demoIndex].name+'.json';\r\n                        let linkElement = document.createElement('a');\r\n                        linkElement.setAttribute('href', dataUri);\r\n                        linkElement.setAttribute('download', exportFileDefaultName);\r\n                        linkElement.click();\r\n                    }, (response) => {\r\n                        console.log('erreur', response)\r\n                    })\r\n            },\r\n            importDemo(event){\r\n                var reader = new FileReader();\r\n                reader.onload = function(event) {\r\n                    var jsonObj = JSON.parse(event.target.result);\r\n                    axios\r\n                        .post(config.baseLink + '/demo/importDemo?demoJson=' + encodeURI(JSON.stringify(jsonObj)))\r\n                        .then((responses) => {\r\n                            this.$parent.update();\r\n                            this.importConfirmation = 0;\r\n                        }, (response) => {\r\n                            console.log('erreur', response)\r\n                        })\r\n                }\r\n                reader.readAsText(event.target.files[0]);\r\n                event.target.value = '';\r\n                this.importConfirmation = 1;\r\n                this.$parent.update();\r\n            }\r\n        }\r\n    }\r\n</script>"],"sourceRoot":"src/components"}]}