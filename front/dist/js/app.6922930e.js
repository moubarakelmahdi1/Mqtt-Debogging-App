(function(e){function t(t){for(var s,i,r=t[0],c=t[1],l=t[2],u=0,p=[];u<r.length;u++)i=r[u],o[i]&&p.push(o[i][0]),o[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);d&&d(t);while(p.length)p.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],s=!0,r=1;r<n.length;r++){var c=n[r];0!==o[c]&&(s=!1)}s&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var s={},o={app:0},a=[];function i(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=s,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var d=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1:function(e,t){},2:function(e,t){},3:function(e,t){},4:function(e,t){},"4d1a":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var s=n("2b0e"),o=n("bb71");n("da64");s["a"].use(o["a"]);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isLogged?n("v-app",[n("Header"),n("v-content",[n("v-container",{attrs:{fluid:"","grid-list-xl":""}},[n("Body")],1)],1),n("Footer")],1):e._e()},i=[],r=(n("a481"),n("7f7f"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"banner"},[s("div",{attrs:{color:"rgb(46,46,64)"}},[s("img",{attrs:{src:n("cf05"),alt:"Logo wlddMQ",id:"logo"}}),s("div",{staticClass:"reloadLogoutButton"},[s("div",{staticClass:"reloadLogoutText"},[e._v("Logout:")]),s("v-btn",{staticClass:"reloadButton",attrs:{color:"rgba(0,103,160,1)",fab:""},on:{click:function(t){return e.logoutDassos()}}},[s("v-icon",{staticClass:"button",staticStyle:{color:"white"}},[e._v("home")])],1),s("div",[e._v("     ")]),s("div",{staticClass:"reloadLogoutText"},[e._v("Refresh:")]),s("v-btn",{staticClass:"reloadButton",attrs:{color:"rgba(0,103,160,1)",fab:""},on:{click:function(t){return e.reloadPage()}}},[s("v-icon",{staticClass:"button",staticStyle:{color:"white"}},[e._v("refresh")])],1)],1)])])}),c=[],l={name:"Header",methods:{reloadPage:function(){window.location.reload()},logoutDassos:function(){localStorage.clear(),this.reloadPage()}}},d=l,u=n("2877"),p=n("6544"),m=n.n(p),f=n("8336"),h=n("132d"),v=Object(u["a"])(d,r,c,!1,null,null,null),b=v.exports;m()(v,{VBtn:f["a"],VIcon:h["a"]});var g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-layout",[n("v-flex",{attrs:{"d-flex":"",md11:""}},[n("Selector",{attrs:{demonstrations:e.demonstrations,editPopUp:e.editPopUp,deletePopUp:e.deletePopUp,selectedActionIndex:e.selectedActionIndex,showBtn:e.showBtn,actionPanel:e.actionPanel,userGroups:e.userGroups},on:{actionPanel:function(t){e.actionPanel=t},selected:function(t){e.selected=t},selectedDemoIndex:function(t){e.selectedDemoIndex=t},selectedActionIndex:function(t){e.selectedActionIndex=t},editPopUp:function(t){e.editPopUp=t},deletePopUp:function(t){e.deletePopUp=t},showBtn:function(t){e.showBtn=t}}}),n("ActionPanel",{attrs:{selected:e.selected,actionPanel:e.actionPanel,deletePopUp:e.deletePopUp,editPopUp:e.editPopUp,demonstrations:e.demonstrations,selectedActionIndex:e.selectedActionIndex,selectedDemoIndex:e.selectedDemoIndex},on:{deletePopUp:function(t){e.deletePopUp=t},editPopUp:function(t){e.editPopUp=t},actionPanel:function(t){e.actionPanel=t},selectedActionIndex:function(t){e.selectedActionIndex=t}}})],1)],1),n("v-flex",{attrs:{"d-flex":"",md10:"","offset-md1":""}},[n("v-flex",{attrs:{md7:""}},[n("PublishPanel",{attrs:{publishPanel:e.publishPanel,topic:e.topic,messageToSend:e.messageToSend,actualTopic:e.actualTopic,actualMessage:e.actualMessage,demonstrations:e.demonstrations,selectedActionIndex:e.selectedActionIndex,selectedDemoIndex:e.selectedDemoIndex,popUps:e.popUps,oldValuesTab:e.oldValuesTab},on:{topic:function(t){e.topic=t},messageToSend:function(t){e.messageToSend=t},popUps:function(t){e.popUps=t},oldValuesTab:function(t){e.oldValuesTab=t}}})],1),n("v-flex",{attrs:{md4:"","offset-md1":""}},[n("SubscribePanel",{attrs:{selectedDemoIndex:e.selectedDemoIndex,demonstrations:e.demonstrations,subscribedTopics:e.subscribedTopics,oldValuesTab:e.oldValuesTab},on:{subscribedTopics:function(t){e.subscribedTopics=t},oldValuesTab:function(t){e.oldValuesTab=t}}})],1)],1),n("br"),n("br"),n("AddingPanel",{attrs:{selected:e.selected,userGroups:e.userGroups,demonstrations:e.demonstrations,selectedActionIndex:e.selectedActionIndex,selectedDemoIndex:e.selectedDemoIndex}}),n("br"),n("br"),this.connection?e._e():n("Inbox",{attrs:{subscribedTopics:e.subscribedTopics},on:{subscribedTopics:e.subscribedTopics}}),n("ConnectionPopUp",{attrs:{connection:e.connection,userGroups:e.userGroups},on:{connection:function(t){e.connection=t},selectedUserGroup:function(t){e.selectedUserGroup=t}}})],1)},x=[],w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{width:"500",persistent:""},scopedSlots:e._u([{key:"activator",fn:function(e){e.on}}]),model:{value:e.connection,callback:function(t){e.connection=t},expression:"connection"}},[n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v("\n            Connection\n        ")]),n("br"),n("v-form",{on:{submit:function(e){e.preventDefault()}}},[n("v-select",{staticClass:"strongTexts",attrs:{solo:"",items:e.userGroups,"item-text":"name",label:"User Group","return-object":""},model:{value:e.selectedUserGroup,callback:function(t){e.selectedUserGroup=t},expression:"selectedUserGroup"}}),n("v-text-field",{attrs:{label:"Host",solo:""},model:{value:e.host,callback:function(t){e.host=t},expression:"host"}}),n("v-text-field",{attrs:{label:"Port",solo:""},model:{value:e.port,callback:function(t){e.port=t},expression:"port"}}),n("v-text-field",{attrs:{label:"Username",solo:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),n("v-text-field",{attrs:{label:"Password",solo:"",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{type:"submit",color:"primary",flat:""},on:{click:function(t){return e.connect()}}},[e._v("\n                    Connect\n                ")])],1)],1),n("v-alert",{attrs:{type:"error"},model:{value:e.connectionError,callback:function(t){e.connectionError=t},expression:"connectionError"}},[e._v("\n            Error on connection\n        ")])],1)],1)},_=[],T=n("6281"),A={name:"ConnectionPopUp",props:{connection:Boolean,userGroups:Array},data:function(){return{username:"",password:"",port:"8000",host:"mqtt.rd.atosworldline.com",connectionModal:!0,connectionError:!1,selectedUserGroup:{id:1,isSelected:!1,name:"WLDD"}}},watch:{connectionModal:function(){this.$emit("connection",this.connectionModal)},selectedUserGroup:function(){this.$emit("selectedUserGroup",this.selectedUserGroup)}},methods:{connect:function(){var e=this;null!=this.selectedUserGroup?Object(T["connectMQTT"])(this.host,this.username,this.password,this.port,function(){e.connectionModal=!1,e.$parent.update()},function(){e.connectionError=!0}):this.connectionError=!0}}},y=A,I=n("0798"),P=n("b0af"),M=n("99d9"),D=n("12b2"),k=n("169a"),C=n("4bd4"),S=n("b56d"),V=n("9910"),U=n("2677"),E=Object(u["a"])(y,w,_,!1,null,null,null),L=E.exports;m()(E,{VAlert:I["a"],VBtn:f["a"],VCard:P["a"],VCardActions:M["a"],VCardTitle:D["a"],VDialog:k["a"],VForm:C["a"],VSelect:S["a"],VSpacer:V["a"],VTextField:U["a"]});var N=n("bc3a"),O=n.n(N),$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-flex",{attrs:{md3:"","offset-md1":""}},[n("v-select",{staticClass:"strongTexts",attrs:{solo:"",items:e.demonstrations,"item-text":"name",label:"Demonstrations","return-object":"","prepend-icon":"build"},on:{input:function(t){return e.atInput()},"click:prepend":function(t){return e.showEditDemoPopUp()}},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),null!=e.selectedActionIndex&&e.showButtons&&null!=e.actionPanel&&e.demonstrations[e.demoIndex].action.length>0?n("div",{staticClass:"editButtons"},[n("v-btn",{staticClass:"button",attrs:{small:"",color:"rgba(0,103,160,1)"},on:{click:function(t){e.editModal=!0}}},[n("div",{staticClass:"button"},[e._v("EDIT")])]),n("v-btn",{staticClass:"button",attrs:{small:"",color:"rgba(0,103,160,1)"},on:{click:function(t){e.deleteModal=!0}}},[n("div",{staticClass:"button"},[e._v("DELETE")])])],1):e._e(),n("br"),null!=e.selectedActionIndex&&e.showButtons&&null!=e.actionPanel&&e.demonstrations[e.demoIndex].action.length>0?n("div",{staticClass:"editButtons"},[0!=e.actionIndex?n("v-btn",{attrs:{small:"",color:"rgba(0,103,160,1)"},on:{click:function(t){return e.changeSorting("left")}}},[n("div",{staticClass:"button"},[e._v("<")])]):n("v-btn",{attrs:{disabled:"",small:""}},[n("div",{staticClass:"button"},[e._v("<")])]),e.actionIndex<e.demonstrations[e.demoIndex].action.length-1?n("v-btn",{staticClass:"button",attrs:{small:"",color:"rgba(0,103,160,1)"},on:{click:function(t){return e.changeSorting("right")}}},[n("div",{staticClass:"button"},[e._v(">")])]):n("v-btn",{attrs:{disabled:"",small:""}},[n("div",{staticClass:"button"},[e._v(">")])])],1):e._e(),n("v-dialog",{attrs:{width:"700",persistent:""},scopedSlots:e._u([{key:"activator",fn:function(e){e.on}}]),model:{value:e.editDemoPopUp,callback:function(t){e.editDemoPopUp=t},expression:"editDemoPopUp"}},[n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[null!=e.selected?n("div",{staticClass:"edit"},[e._v("\n                    Edit demonstration : "+e._s(e.demonstrations[e.demoIndex].name)+"\n                ")]):e._e(),n("v-spacer"),n("div",{staticClass:"edit"},[e._v("Import")]),n("v-btn",{attrs:{fab:"",small:"",color:"rgba(0,103,160,1)"},on:{click:function(t){return e.$refs.inputUpload.click()}}},[n("v-icon",{attrs:{color:"white"}},[e._v("\n                        cloud_upload\n                    ")])],1),n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"inputUpload",attrs:{type:"file",id:"jsonDemo",name:"jsonDemo",accept:".json"},on:{change:function(t){return e.importDemo(t)}}}),n("div",{staticClass:"edit"},[e._v("Export")]),n("v-btn",{attrs:{fab:"",small:"",color:"rgba(0,103,160,1)"},on:{click:function(t){return e.exportDemo()}}},[n("v-icon",{attrs:{color:"white"}},[e._v("\n                        cloud_download\n                    ")])],1),n("div",{staticClass:"edit"},[e._v("Delete")]),n("v-btn",{attrs:{fab:"",small:"",color:"rgba(0,103,160,1)"},on:{click:function(t){return e.showDeleteDemoPopUp()}}},[n("v-icon",{attrs:{color:"white"}},[e._v("\n                        remove\n                    ")])],1)],1),n("v-form",{on:{submit:function(e){e.preventDefault()}}},[n("v-text-field",{attrs:{label:"Demonstration Name",box:""},model:{value:e.newDemoName,callback:function(t){e.newDemoName=t},expression:"newDemoName"}}),n("div",{staticClass:"userGroups"},e._l(e.userGroupInEdit,function(t){return n("v-flex",{attrs:{"offset-md1":"","offset-xs1":""}},[n("input",{staticClass:"checkboxesInSelector",attrs:{type:"checkbox",id:t.id+10},on:{click:function(e){t.isSelected=!t.isSelected}}}),n("div",{attrs:{slot:"label"},slot:"label"},[e._v("\n                            "+e._s(t.name)+"\n                        ")])])}),1),n("v-card-actions",[n("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){return e.cancelEditDemoPopUp()}}},[e._v("\n                        Cancel\n                    ")]),n("v-spacer"),n("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){return e.editDemo()}}},[e._v("\n                        Save\n                    ")])],1)],1)],1)],1),n("v-dialog",{attrs:{width:"550"},scopedSlots:e._u([{key:"activator",fn:function(e){e.on}}]),model:{value:e.deleteDemoPopUp,callback:function(t){e.deleteDemoPopUp=t},expression:"deleteDemoPopUp"}},[n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v("\n                WARNING : Are you sure to delete the demonstration :\n            ")]),n("v-card-actions",[n("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){e.deleteDemoPopUp=0}}},[e._v("\n                    NO\n                ")]),n("v-spacer"),n("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){return e.deleteDemo()}}},[e._v("\n                    YES\n                ")])],1)],1)],1),n("v-dialog",{attrs:{width:"550"},scopedSlots:e._u([{key:"activator",fn:function(e){e.on}}]),model:{value:e.importConfirmation,callback:function(t){e.importConfirmation=t},expression:"importConfirmation"}},[n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v("\n                Demonstration Imported!\n            ")]),n("v-card-actions",[n("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){e.importConfirmation=0}}},[e._v("\n                    Close\n                ")])],1)],1)],1)],1)},j=[],B=(n("55dd"),n("ac6a"),n("c5f6"),{name:"Selector",props:{demonstrations:Array,deletePopUp:Boolean,editPopUp:Boolean,selectedActionIndex:Number,showBtn:Number,actionPanel:Number,userGroups:Array},data:function(){return{selected:null,showActionPanel:null,demoIndex:null,actionIndex:this.selectedActionIndex,deleteModal:this.deletePopUp,editModal:this.editPopUp,showButtons:this.showBtn,editDemoPopUp:0,newDemoName:"",userGroupList:"",deleteDemoPopUp:0,toImportDemo:"",importConfirmation:0,userGroupInEdit:this.userGroups}},watch:{selected:function(){var e=this;this.$emit("selected",this.selected),this.$emit("showActionPanel",this.showActionPanel),null!=this.selected&&(this.demonstrations.forEach(function(t){t.id==e.selected.id&&(e.demoIndex=e.demonstrations.indexOf(t))}),this.updateCheckBoxes()),this.$emit("selectedDemoIndex",this.demoIndex)},showActionPanel:function(){this.$emit("showActionPanel",this.showActionPanel)},deletePopUp:function(){this.deleteModal=this.deletePopUp},deleteModal:function(){this.$emit("deletePopUp",this.deleteModal)},editPopUp:function(){this.editModal=this.editPopUp},editModal:function(){this.$emit("editPopUp",this.editModal)},showButtons:function(){this.$emit("showBtn",this.showButtons)},showBtn:function(){this.showButtons=this.showBtn},actionIndex:function(){this.$emit("selectedActionIndex",this.actionIndex)},selectedActionIndex:function(){this.actionIndex=this.selectedActionIndex},userGroups:function(){this.userGroupInEdit=this.userGroups}},methods:{updateCheckBoxes:function(){var e=this;this.demonstrations[this.demoIndex].user.forEach(function(t){e.userGroupInEdit.forEach(function(e){t.id==e.id&&(document.getElementById(e.id+10).checked=!0,e.isSelected=!0)})})},atInput:function(){this.showActionPanel=0,this.actionIndex=null,this.showButtons=0},changeSorting:function(e){var t=this,n=null;"left"==e?n=this.demonstrations[this.demoIndex].action[this.actionIndex-1]:"right"==e&&(n=this.demonstrations[this.demoIndex].action[this.actionIndex+1]),O.a.post(T["config"].baseLink+"/action/editActionSorting?actionId="+this.demonstrations[this.demoIndex].action[this.actionIndex].id+"&permutedActionId="+n.id+"&actionSort="+this.demonstrations[this.demoIndex].action[this.actionIndex].sort+"&permutedActionSort="+n.sort).then(function(n){t.$parent.update(),"left"==e?t.actionIndex=t.actionIndex-1:"right"==e&&(t.actionIndex=t.actionIndex+1)},function(e){console.log("erreur",e)})},showEditDemoPopUp:function(){null!=this.selected&&(this.newDemoName=this.demonstrations[this.demoIndex].name,this.editDemoPopUp=1)},cancelEditDemoPopUp:function(){this.editDemoPopUp=0,this.newDemoName="",this.$parent.update(),this.updateCheckBoxes()},editDemo:function(){var e=this;this.newDemoName.length>0?(this.userGroups.forEach(function(t){1==t.isSelected&&(e.userGroupList=e.userGroupList+t.id+"|",t.isSelected=!1)}),this.userGroupList.length>0?O.a.post(T["config"].baseLink+"/demo/editDemo?demoId="+this.demonstrations[this.demoIndex].id+"&name="+encodeURI(this.newDemoName)+"&userGroupsIds="+encodeURI(this.userGroupList)).then(function(t){e.$parent.update(),e.userGroupList="",e.selected=null,e.cancelEditDemoPopUp()},function(e){console.log("erreur",e)}):alert("Select demonstration user groups!")):alert("Fill demonstration name!")},showDeleteDemoPopUp:function(){null!=this.selected&&(this.deleteDemoPopUp=1)},deleteDemo:function(){var e=this;O.a.post(T["config"].baseLink+"/demo/deleteDemo?demoId="+this.demonstrations[this.demoIndex].id).then(function(t){e.$parent.update(),e.selected=null,e.deleteDemoPopUp=0,e.editDemoPopUp=0},function(e){console.log("erreur",e)})},exportDemo:function(){var e=this;O.a.get(T["config"].baseLink+"/demo/getDemo?demoId="+this.demonstrations[this.demoIndex].id).then(function(t){var n=t.data;delete n.id,n.action.forEach(function(e){delete e.id,e.parametersTopics.forEach(function(e){return delete e.id}),e.parametersMessages.forEach(function(e){return delete e.id})});var s=JSON.stringify(n),o="data:application/json;charset=utf-8,"+encodeURIComponent(s),a=e.demonstrations[e.demoIndex].name+".json",i=document.createElement("a");i.setAttribute("href",o),i.setAttribute("download",a),i.click()},function(e){console.log("erreur",e)})},importDemo:function(e){var t=new FileReader;t.onload=function(e){var t=this,n=JSON.parse(e.target.result);O.a.post(T["config"].baseLink+"/demo/importDemo?demoJson="+encodeURI(JSON.stringify(n))).then(function(e){t.$parent.update(),t.importConfirmation=0},function(e){console.log("erreur",e)})},t.readAsText(e.target.files[0]),e.target.value="",this.importConfirmation=1,this.$parent.update()}}}),G=B,R=n("0e8f"),F=Object(u["a"])(G,$,j,!1,null,null,null),Q=F.exports;m()(F,{VBtn:f["a"],VCard:P["a"],VCardActions:M["a"],VCardTitle:D["a"],VDialog:k["a"],VFlex:R["a"],VForm:C["a"],VIcon:h["a"],VSelect:S["a"],VSpacer:V["a"],VTextField:U["a"]});var z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-flex",{attrs:{md9:""}},[null!=e.selected?n("v-expansion-panel",{model:{value:e.showActionPanel,callback:function(t){e.showActionPanel=t},expression:"showActionPanel"}},[n("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[n("div",{staticClass:"strongTexts"},[e._v("Actions")])]},proxy:!0}],null,!1,953021048)},[n("v-card",[n("div",{staticClass:"actionsGroup"},e._l(e.selected.action,function(t){return n("v-flex",{staticClass:"action",attrs:{md3:""}},[n("v-flex",[n("v-btn",{attrs:{color:"rgba(0,103,160,1)",block:""},on:{click:function(n){return e.assignTopic(t)}}},[e.actionId==t.id?n("div",{staticClass:"button"},[e._v(">")]):e._e(),n("div",{staticClass:"button",staticStyle:{"white-space":"pre-wrap","font-size":"12px"}},[e._v(e._s(t.name))]),e.actionId==t.id?n("div",{staticClass:"button"},[e._v("<")]):e._e()])],1)],1)}),1)])],1)],1):e._e(),n("v-dialog",{attrs:{width:"550"},scopedSlots:e._u([{key:"activator",fn:function(e){e.on}}]),model:{value:e.deletePopUp,callback:function(t){e.deletePopUp=t},expression:"deletePopUp"}},[n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v("\n                WARNING : Are you sure to delete the action : "+e._s(e.actionName)+"\n            ")]),n("v-card-actions",[n("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){e.deleteModal=!1}}},[e._v("\n                    NO\n                ")]),n("v-spacer"),n("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){return e.deleteAction()}}},[e._v("\n                    YES\n                ")])],1)],1)],1),n("v-dialog",{attrs:{width:"550",persistent:""},scopedSlots:e._u([{key:"activator",fn:function(e){e.on}}]),model:{value:e.editModal,callback:function(t){e.editModal=t},expression:"editModal"}},[n("v-card",{on:{submit:function(e){e.preventDefault()}}},[n("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[n("div",{staticClass:"edit"},[e._v("\n                    Edit action : "+e._s(e.actionName)+"\n                ")]),n("v-spacer"),n("div",{staticClass:"edit"},[e._v("Import")]),n("v-btn",{attrs:{fab:"",small:"",color:"rgba(0,103,160,1)"},on:{click:function(t){return e.$refs.inputUpload.click()}}},[n("v-icon",{attrs:{color:"white"}},[e._v("\n                        cloud_upload\n                    ")])],1),n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"inputUpload",attrs:{type:"file",id:"jsonAction",name:"jsonAction",accept:".json"},on:{change:function(t){return e.importAction(t,e.demonstrations[e.selectedDemoIndex].id)}}}),n("div",{staticClass:"edit"},[e._v("Export")]),n("v-btn",{attrs:{fab:"",small:"",color:"rgba(0,103,160,1)"},on:{click:function(t){return e.exportAction()}}},[n("v-icon",{attrs:{color:"white"}},[e._v("\n                        cloud_download\n                    ")])],1)],1),n("v-form",[n("v-text-field",{attrs:{label:"Action Name",solo:""},model:{value:e.newActionName,callback:function(t){e.newActionName=t},expression:"newActionName"}}),n("v-text-field",{attrs:{label:"Action Topic",solo:""},model:{value:e.newActionTopic,callback:function(t){e.newActionTopic=t},expression:"newActionTopic"}}),n("v-textarea",{attrs:{label:"Action Message",solo:""},model:{value:e.newActionMessage,callback:function(t){e.newActionMessage=t},expression:"newActionMessage"}}),n("v-card-actions",[n("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){return e.cancelEditModal()}}},[e._v("\n                        CANCEL\n                    ")]),n("v-spacer"),n("v-btn",{attrs:{type:"submit",color:"primary",flat:""},on:{click:function(t){return e.editAction()}}},[e._v("\n                        SAVE\n                    ")])],1)],1)],1)],1),n("v-dialog",{attrs:{width:"500",persistent:""},scopedSlots:e._u([{key:"activator",fn:function(e){e.on}}]),model:{value:e.popUpMessage,callback:function(t){e.popUpMessage=t},expression:"popUpMessage"}},[n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v("\n                Fill default parameters for Message\n            ")]),n("br"),n("v-form",{on:{submit:function(t){return t.preventDefault(),e.setDefaultParams("message")}}},[e._l(e.parametersMap.size,function(t){return n("v-flex",{attrs:{"d-flex":""}},[n("v-flex",{attrs:{md3:"","offset-md1":"","offset-xs1":""}},[n("div",{staticClass:"parameters"},[e._v("\n                            "+e._s(e.parametersMap.keys()[t-1])+"\n                        ")])]),n("v-flex",{attrs:{md6:"","d-flex":""}},[n("v-text-field",{ref:"parameterContentMessage",refInFor:!0,attrs:{value:e.findValueExisting(t),solo:""},on:{change:function(n){return e.setValue("message",t,n)}}})],1)],1)}),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{type:"submit",color:"primary",flat:""},on:{click:function(t){return e.setDefaultParams("message")}}},[e._v("\n                        Apply\n                    ")])],1)],2)],1)],1),n("v-dialog",{attrs:{width:"500",persistent:""},scopedSlots:e._u([{key:"activator",fn:function(e){e.on}}]),model:{value:e.popUpTopic,callback:function(t){e.popUpTopic=t},expression:"popUpTopic"}},[n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v("\n                Fill default parameters for Topic\n            ")]),n("br"),n("v-form",{on:{submit:function(t){return t.preventDefault(),e.setDefaultParams("topic")}}},[e._l(e.parametersMap.size,function(t){return n("v-flex",{attrs:{"d-flex":""}},[n("v-flex",{attrs:{md3:"","offset-md1":"","offset-xs1":""}},[n("div",{staticClass:"parameters"},[e._v("\n                            "+e._s(e.parametersMap.keys()[t-1])+"\n                        ")])]),n("v-flex",{attrs:{md6:"","d-flex":""}},[n("v-text-field",{ref:"parameterContentTopic",refInFor:!0,attrs:{value:e.findValueExisting(t),solo:""},on:{change:function(n){return e.setValue("topic",t,n)}}})],1)],1)}),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{type:"submit",color:"primary",flat:""},on:{click:function(t){return e.setDefaultParams("topic")}}},[e._v("\n                        Apply\n                    ")])],1)],2)],1)],1),n("v-dialog",{attrs:{width:"550"},scopedSlots:e._u([{key:"activator",fn:function(e){e.on}}]),model:{value:e.importConfirmation,callback:function(t){e.importConfirmation=t},expression:"importConfirmation"}},[n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v("\n                Action Imported!\n            ")]),n("v-card-actions",[n("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){e.importConfirmation=0}}},[e._v("\n                    Close\n                ")])],1)],1)],1)],1)},J=[],W=(n("ac4d"),n("8a81"),n("8ff3")),q={name:"ActionPanel",props:{actionPanel:Number,selected:Object,deletePopUp:Boolean,editPopUp:Boolean,demonstrations:Array,selectedActionIndex:Number,selectedDemoIndex:Number},data:function(){return{showActionPanel:this.actionPanel,deleteModal:this.deletePopUp,actionName:null,actionId:null,editModal:this.editPopUp,newActionName:"",newActionTopic:"",newActionMessage:"",parametersMap:new W,parametersIds:new W,popUpMessage:0,popUpTopic:0,newDefaultValues:[],actionIndex:this.selectedActionIndex,tempParameters:[],importConfirmation:0}},watch:{actionPanel:function(){this.showActionPanel=this.actionPanel},selected:function(){this.showActionPanel=0},deletePopUp:function(){this.deleteModal=this.deletePopUp},deleteModal:function(){this.$emit("deletePopUp",this.deleteModal)},editPopUp:function(){this.editModal=this.editPopUp,1==this.editModal&&(this.newActionName=this.demonstrations[this.selectedDemoIndex].action[this.selectedActionIndex].name,this.newActionTopic=this.demonstrations[this.selectedDemoIndex].action[this.selectedActionIndex].topicOriginal,this.newActionMessage=this.demonstrations[this.selectedDemoIndex].action[this.selectedActionIndex].messageOriginal)},editModal:function(){this.$emit("editPopUp",this.editModal)},showActionPanel:function(){this.$emit("actionPanel",this.showActionPanel)},selectedActionIndex:function(){this.actionIndex=this.selectedActionIndex},actionIndex:function(){this.$emit("selectedActionIndex",this.actionIndex)}},methods:{assignTopic:function(e){this.actionName=e.name,this.actionId=e.id,this.$parent.assignTopic(e),this.newActionName=e.name,this.newActionTopic=e.topic,this.newActionMessage=e.message},deleteAction:function(){var e=this;O.a.post(T["config"].baseLink+"/action/deleteAction?actionId="+this.actionId).then(function(t){e.$parent.update(),e.deleteModal=!1,e.newActionName="",e.newActionMessage="",e.newActionTopic="",e.actionIndex=null},function(e){console.log("erreur",e)})},editAction:function(){var e=this;""!=this.newActionName&&""!=this.newActionTopic?O.a.post(T["config"].baseLink+"/action/editAction?actionId="+this.actionId+"&name="+encodeURI(this.newActionName)+"&topic="+encodeURI(this.newActionTopic)+"&message="+encodeURI(this.newActionMessage)+"&lastEditionId="+localStorage.getItem("WLDDMQ_id")).then(function(t){console.log(e.demonstrations[e.selectedDemoIndex].action[e.actionIndex]),e.demonstrations[e.selectedDemoIndex].action[e.actionIndex].parametersTopics.forEach(function(t){return e.tempParameters.push(t)}),e.demonstrations[e.selectedDemoIndex].action[e.actionIndex].parametersMessages.forEach(function(t){return e.tempParameters.push(t)}),e.$parent.update(function(){e.showParamsPopUp("topic",e.$parent.demonstrations)}),e.editModal=!1},function(e){console.log("erreur",e)}):alert("Fill action name and topic!")},showParamsPopUp:function(e,t){var n,s=this,o=/\{\{[a-zA-Z0-9]*\}\}/gm;"topic"==e?n=this.newActionTopic.matchAll(o):"message"==e&&(n=this.newActionMessage.matchAll(o));var a=!0,i=!1,r=void 0;try{for(var c,l=function(){var n=c.value;s.parametersMap.set(n[0],n[0]),"topic"==e?s.parametersIds.set(n[0],t[s.selectedDemoIndex].action[s.selectedActionIndex].parametersTopics.filter(function(e){return e.parameter==n[0]})[0].id):"message"==e&&s.parametersIds.set(n[0],t[s.selectedDemoIndex].action[s.selectedActionIndex].parametersMessages.filter(function(e){return e.parameter==n[0]})[0].id)},d=n[Symbol.iterator]();!(a=(c=d.next()).done);a=!0)l()}catch(u){i=!0,r=u}finally{try{a||null==d.return||d.return()}finally{if(i)throw r}}this.parametersMap.size>0?"topic"==e?this.popUpTopic=1:"message"==e&&(this.popUpMessage=1):"topic"==e?this.$parent.update(function(){s.showParamsPopUp("message",s.$parent.demonstrations)}):this.tempParameters=[]},cancelEditModal:function(){this.editModal=0,this.newActionName=this.demonstrations[this.selectedDemoIndex].action[this.selectedActionIndex].name,this.newActionTopic=this.demonstrations[this.selectedDemoIndex].action[this.selectedActionIndex].topic,this.newActionMessage=this.demonstrations[this.selectedDemoIndex].action[this.selectedActionIndex].message},closeParamEditing:function(){this.popUpTopic=0,this.popUpMessage=0,this.parametersMap=new W,this.parametersIds=new W,this.newDefaultValues=[]},setDefaultParams:function(e){for(var t=this,n=new Array,s=0;s<this.parametersIds.size;s++){var o=new Object;o.id=this.parametersIds.values()[s],o.value=this.newDefaultValues[s],n.push(o)}O.a.post(T["config"].baseLink+"/parameters/addAllParametersDefaultValues?jsonString="+encodeURI(JSON.stringify(n))).then(function(n){"topic"==e?(t.$parent.update(function(){t.showParamsPopUp("message",t.$parent.demonstrations)}),t.closeParamEditing()):(t.$parent.update(),t.closeParamEditing(),t.tempParameters=[])},function(e){console.log("erreur",e)})},findValueExisting:function(e){for(var t="",n=0;n<this.tempParameters.length;n++)this.tempParameters[n].parameter==this.parametersMap.keys()[e-1]&&(t=this.tempParameters[n].parameterDefaultValue,this.parametersMap.set(this.tempParameters[n].parameter,t),this.newDefaultValues[e-1]=t);return t},setValue:function(e,t,n){this.parametersMap.set(this.parametersMap.keys()[t-1],n),"topic"==e?(this.$refs.parameterContentTopic[t-1].value=n,this.newDefaultValues[t-1]=n):"message"==e&&(this.$refs.parameterContentMessage[t-1].value=n,this.newDefaultValues[t-1]=n)},exportAction:function(){var e=this;O.a.get(T["config"].baseLink+"/action/getActionById?actionId="+this.demonstrations[this.selectedDemoIndex].action[this.selectedActionIndex].id).then(function(t){var n=t.data;delete n.id,n.parametersTopics.forEach(function(e){return delete e.id}),n.parametersMessages.forEach(function(e){return delete e.id});var s=JSON.stringify(n),o="data:application/json;charset=utf-8,"+encodeURIComponent(s),a=e.demonstrations[e.selectedDemoIndex].action[e.selectedActionIndex].name+"_action.json",i=document.createElement("a");i.setAttribute("href",o),i.setAttribute("download",a),i.click()},function(e){console.log("erreur",e)})},importAction:function(e,t){var n=new FileReader;n.onload=function(e){var n=this,s=JSON.parse(e.target.result);console.log(t),O.a.post(T["config"].baseLink+"/action/importAction?actionJson="+encodeURI(JSON.stringify(s))+"&demoId="+t).then(function(e){n.$parent.update(),n.cancelEditModal(),n.importConfirmation=0},function(e){console.log("erreur",e)})},n.readAsText(e.target.files[0]),e.target.value="",this.importConfirmation=1,this.$parent.update(),this.cancelEditModal()}}},H=q,Z=n("cd55"),Y=n("49e2"),K=n("a844"),X=Object(u["a"])(H,z,J,!1,null,null,null),ee=X.exports;m()(X,{VBtn:f["a"],VCard:P["a"],VCardActions:M["a"],VCardTitle:D["a"],VDialog:k["a"],VExpansionPanel:Z["a"],VExpansionPanelContent:Y["a"],VFlex:R["a"],VForm:C["a"],VIcon:h["a"],VSpacer:V["a"],VTextField:U["a"],VTextarea:K["a"]});var te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-flex",[n("v-flex",[n("v-expansion-panel",{model:{value:e.showPublishPanel,callback:function(t){e.showPublishPanel=t},expression:"showPublishPanel"}},[n("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[n("div",{staticClass:"strongTexts"},[e._v("Publish")])]},proxy:!0}])},[n("v-form",{on:{submit:function(e){e.preventDefault()}}},[n("v-layout",[n("v-flex",{attrs:{md10:"","offset-md1":"","offset-xs1":""}},[n("br"),n("v-text-field",{attrs:{label:"Topic",box:""},model:{value:e.publishTopic,callback:function(t){e.publishTopic=t},expression:"publishTopic"}}),n("br"),n("v-textarea",{attrs:{label:"Message",box:""},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1)],1),n("v-flex",[n("v-btn",{staticClass:"addButton",attrs:{type:"submit",color:"rgba(0,103,160,1)"},on:{click:function(t){return e.publish()}}},[n("div",{staticClass:"button"},[e._v("Publish")])])],1)],1)],1)],1)],1),n("v-dialog",{attrs:{width:"500",persistent:""},model:{value:e.popUpMessage,callback:function(t){e.popUpMessage=t},expression:"popUpMessage"}},[n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v("\n                Fill parameters for Message\n            ")]),n("br"),n("v-form",{on:{submit:function(e){e.preventDefault()}}},[e._l(e.parametersMap.size,function(t){return n("v-flex",{attrs:{"d-flex":""}},[n("v-flex",{attrs:{md3:"","offset-md1":"","offset-xs1":""}},[n("div",{staticClass:"parameters"},[e._v("\n                            "+e._s(e.parametersMap.keys()[t-1])+"\n                        ")])]),n("v-flex",{attrs:{md8:"","d-flex":""}},[n("v-text-field",{ref:"parameterContentMessage",refInFor:!0,attrs:{value:e.findOldValue(t),solo:""},on:{change:function(n){return e.setValue("message",t,n)}}}),n("div",{staticClass:"defaultValuebutton"},[n("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(s){var o=s.on;return[n("v-btn",e._g({attrs:{fab:"",small:""},on:{click:function(n){return e.setDefaultValue("message",t)}}},o),[n("v-icon",{attrs:{dark:""}},[e._v("build")])],1)]}}],null,!0)},[n("span",[e._v(e._s(e.defaultMap.values()[t-1]))])]),""!=e.findOldValue(t)?n("v-btn",{attrs:{fab:"",small:""},on:{click:function(n){return e.setOldValue("message",t)}}},[n("v-icon",{attrs:{dark:""}},[e._v("backup")])],1):e._e()],1)],1)],1)}),n("v-card-actions",[n("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){return e.closePopUp("message")}}},[e._v("\n                        Cancel\n                    ")]),n("v-spacer"),n("v-btn",{attrs:{type:"submit",color:"primary",flat:""},on:{click:function(t){return e.replaceText("message")}}},[e._v("\n                        Apply\n                    ")])],1)],2)],1)],1),n("v-dialog",{attrs:{width:"500",persistent:""},model:{value:e.popUpTopic,callback:function(t){e.popUpTopic=t},expression:"popUpTopic"}},[n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v("\n                Fill parameters for Topic\n            ")]),n("br"),n("v-form",{on:{submit:function(e){e.preventDefault()}}},[e._l(e.parametersMap.size,function(t){return n("v-flex",{attrs:{"d-flex":""}},[n("v-flex",{attrs:{md3:"","offset-md1":"","offset-xs1":""}},[n("div",{staticClass:"parameters"},[e._v("\n                            "+e._s(e.parametersMap.keys()[t-1])+"\n                        ")])]),n("v-flex",{attrs:{md8:"","d-flex":""}},[n("v-text-field",{ref:"parameterContentTopic",refInFor:!0,attrs:{value:e.findOldValue(t),solo:""},on:{change:function(n){return e.setValue("topic",t,n)}}}),n("div",{staticClass:"defaultValuebutton"},[n("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(s){var o=s.on;return[n("v-btn",e._g({attrs:{fab:"",small:""},on:{click:function(n){return e.setDefaultValue("topic",t)}}},o),[n("v-icon",{attrs:{dark:""}},[e._v("build")])],1)]}}],null,!0)},[n("span",[e._v(e._s(e.defaultMap.values()[t-1]))])]),""!=e.findOldValue(t)?n("v-btn",{attrs:{fab:"",small:""},on:{click:function(n){return e.setOldValue("topic",t)}}},[n("v-icon",{attrs:{dark:""}},[e._v("backup")])],1):e._e()],1)],1)],1)}),n("v-card-actions",[n("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){return e.closePopUp("topic")}}},[e._v("\n                        Cancel\n                    ")]),n("v-spacer"),n("v-btn",{attrs:{type:"submit",color:"primary",flat:""},on:{click:function(t){return e.replaceText("topic")}}},[e._v("\n                        Apply\n                    ")])],1)],2)],1)],1)],1)},ne=[],se=n("35ef"),oe=n("8ff3"),ae={name:"PublishPanel",props:{publishPanel:Number,topic:String,messageToSend:String,actualTopic:String,actualMessage:String,demonstrations:Array,selectedActionIndex:Number,selectedDemoIndex:Number,popUps:Number,oldValuesTab:Array},data:function(){return{showPublishPanel:this.publishPanel,publishTopic:this.topic,message:this.messageToSend,popUpMessage:0,popUpTopic:0,parametersMap:new oe,originalTopic:this.actualTopic,originalMessage:this.actualMessage,defaultMap:new oe,content:"",showPopUps:this.popUps,oldValues:[{key:"{{test}}",value:"{{test}}"}],retain:!1,retainChoice:[!0,!1]}},watch:{publishTopic:function(){this.$emit("topic",this.publishTopic)},topic:function(){this.publishTopic=this.topic},message:function(){this.$emit("messageToSend",this.message)},messageToSend:function(){this.message=this.messageToSend},actualTopic:function(){this.originalTopic=this.actualTopic},actualMessage:function(){this.originalMessage=this.actualMessage},publishPanel:function(){this.showPublishPanel=this.publishPanel},popUps:function(){this.showPopUps=this.popUps},showPopUps:function(){this.$emit("popUps",this.showPopUps),this.showPopUps&&this.showPopUp("topic")},oldValues:function(){this.$emit("oldValuesTab",this.oldValues)},oldValuesTab:function(){this.oldValues=this.oldValuesTab}},methods:{publish:function(){if(this.publishTopic.length>0){var e=this,t={retain:e.retain};Object(T["publishMQTT"])(this.publishTopic,this.message,t)}else alert("Fill topic where to publish!")},showPopUp:function(e){var t,n=/{{([a-zA-Z0-9]*)}}/gm;"topic"==e?t=se(this.originalTopic,n).toArray():"message"==e&&(t=se(this.originalMessage,n).toArray());for(var s=0;s<t.length;s++)this.parametersMap.set("{{"+t[s]+"}}","{{"+t[s]+"}}"),"topic"==e?this.defaultMap.set("{{"+t[s]+"}}",this.demonstrations[this.selectedDemoIndex].action[this.selectedActionIndex].parametersTopics.filter(function(e){return e.parameter=="{{"+t[s]+"}}"})[0].parameterDefaultValue):"message"==e&&this.defaultMap.set("{{"+t[s]+"}}",this.demonstrations[this.selectedDemoIndex].action[this.selectedActionIndex].parametersMessages.filter(function(e){return e.parameter=="{{"+t[s]+"}}"})[0].parameterDefaultValue);this.parametersMap.size>0?"topic"==e?(this.publishTopic=this.originalTopic,this.popUpTopic=1):"message"==e&&(this.message=this.originalMessage,this.popUpMessage=1):"topic"==e&&(this.showPopUp("message"),this.showPopUps=0)},replaceText:function(e){for(var t=0;t<this.parametersMap.size;t++){"topic"==e?(this.demonstrations[this.selectedDemoIndex].action[this.selectedActionIndex].topic=this.publishTopic.replace(this.parametersMap.keys()[t],this.parametersMap.values()[t]),this.publishTopic=this.demonstrations[this.selectedDemoIndex].action[this.selectedActionIndex].topic):"message"==e&&(this.demonstrations[this.selectedDemoIndex].action[this.selectedActionIndex].message=this.message.replace(this.parametersMap.keys()[t],this.parametersMap.values()[t]),this.message=this.demonstrations[this.selectedDemoIndex].action[this.selectedActionIndex].message);var n=new Object,s=1;n.key=this.parametersMap.keys()[t],n.value=this.parametersMap.values()[t];for(var o=0;o<this.oldValues.length;o++)this.oldValues[t].key==n.key&&(this.oldValues[t].value=this.parametersMap.values()[t],s=0);s&&this.oldValues.push(n)}this.closePopUp(),"topic"==e&&this.showPopUp("message")},setDefaultValue:function(e,t){this.parametersMap.set(this.parametersMap.keys()[t-1],this.defaultMap.values()[t-1]),"topic"==e?this.$refs.parameterContentTopic[t-1].value=this.defaultMap.values()[t-1]:"message"==e&&(this.$refs.parameterContentMessage[t-1].value=this.defaultMap.values()[t-1])},setValue:function(e,t,n){this.parametersMap.set(this.parametersMap.keys()[t-1],n),"topic"==e?this.$refs.parameterContentTopic[t-1].value=n:"message"==e&&(this.$refs.parameterContentMessage[t-1].value=n)},closePopUp:function(e){this.parametersMap=new oe,this.defaultMap=new oe,this.popUpMessage=0,this.popUpTopic=0,this.showPopUps=0,"topic"==e&&this.showPopUp("message")},setOldValue:function(e,t){var n=this.findOldValue(t);this.parametersMap.set(this.parametersMap.keys()[t-1],n),"topic"==e?this.$refs.parameterContentTopic[t-1].value=n:"message"==e&&(this.$refs.parameterContentMessage[t-1].value=n)},findOldValue:function(e){for(var t="",n=0;n<this.oldValues.length;n++)this.oldValues[n].key==this.parametersMap.keys()[e-1]&&(t=this.oldValues[n].value,this.parametersMap.set(this.oldValues[n].key,t));return t}}},ie=ae,re=n("a722"),ce=n("3a2f"),le=Object(u["a"])(ie,te,ne,!1,null,null,null),de=le.exports;m()(le,{VBtn:f["a"],VCard:P["a"],VCardActions:M["a"],VCardTitle:D["a"],VDialog:k["a"],VExpansionPanel:Z["a"],VExpansionPanelContent:Y["a"],VFlex:R["a"],VForm:C["a"],VIcon:h["a"],VLayout:re["a"],VSpacer:V["a"],VTextField:U["a"],VTextarea:K["a"],VTooltip:ce["a"]});var ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-flex",{attrs:{"offset-xs1":""}},[n("v-flex",[null!=e.demonstrations[e.selectedDemoIndex]?n("v-expansion-panel",[n("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[n("div",{staticClass:"strongTexts"},[e._v("Subscribe")])]},proxy:!0}],null,!1,3689489469)},[n("v-card",[n("div",{staticClass:"subscribesGroup"},[e._l(e.demonstrations[e.selectedDemoIndex].action,function(t){return n("v-flex",{attrs:{md4:"","xs-4":"","offset-xs1":"","offset-md1":""}},[n("br"),n("v-flex",[n("input",{staticClass:"checkboxes",attrs:{type:"checkbox",id:t.name},on:{click:function(n){return e.showPopUpSubscribe(t)}}})]),n("label",{staticClass:"subscribeLabels"},[e._v(e._s(t.name))])],1)}),n("v-flex",[n("v-btn",{staticClass:"subscribeButton",attrs:{color:"rgba(0,103,160,1)"},on:{click:function(t){return e.subscribeTopic()}}},[n("div",{staticClass:"button"},[e._v("Subscribe")])]),n("v-btn",{staticClass:"subscribeButton",attrs:{color:"rgba(0,103,160,1)"},on:{click:function(t){e.addTopic=1}}},[n("div",{staticClass:"button"},[e._v("Add Topic Subscribtion")])])],1)],2)])],1)],1):e._e()],1),n("v-dialog",{attrs:{width:"500",persistent:""},scopedSlots:e._u([{key:"activator",fn:function(e){e.on}}]),model:{value:e.popUpSubscribe,callback:function(t){e.popUpSubscribe=t},expression:"popUpSubscribe"}},[n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v("\n                Fill parameters for Topic\n            ")]),n("br"),n("v-form",{on:{submit:function(e){e.preventDefault()}}},[e._l(e.parametersMap.size,function(t){return n("v-flex",{attrs:{"d-flex":""}},[n("v-flex",{attrs:{md3:"","offset-md1":"","offset-xs1":""}},[n("div",{staticClass:"parameters"},[e._v("\n                            "+e._s(e.parametersMap.keys()[t-1])+"\n                        ")])]),n("v-flex",{attrs:{md8:"","d-flex":""}},[n("v-text-field",{ref:"parameterContentTopic",refInFor:!0,attrs:{value:e.findOldValue(t),solo:""},on:{change:function(n){return e.setValue(t,n)}}}),n("div",{staticClass:"defaultValuebutton"},[n("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(s){var o=s.on;return[n("v-btn",e._g({attrs:{fab:"",small:""},on:{click:function(n){return e.setDefaultValue(t)}}},o),[n("v-icon",{attrs:{dark:""}},[e._v("build")])],1)]}}],null,!0)},[n("span",[e._v(e._s(e.defaultMap.values()[t-1]))])])],1)],1)],1)}),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{type:"submit",color:"primary",flat:""},on:{click:function(t){return e.replaceText()}}},[e._v("\n                        Apply\n                    ")])],1)],2)],1)],1),n("v-dialog",{attrs:{width:"500",persistent:""},scopedSlots:e._u([{key:"activator",fn:function(e){e.on}}]),model:{value:e.addTopic,callback:function(t){e.addTopic=t},expression:"addTopic"}},[n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v("\n                Enter topic\n            ")]),n("v-text-field",{attrs:{label:"Topic",solo:""},model:{value:e.newTopicSubscription,callback:function(t){e.newTopicSubscription=t},expression:"newTopicSubscription"}}),n("v-card-actions",[n("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){return e.cancelNewTopicSubscribtion()}}},[e._v("\n                    Cancel\n                ")]),n("v-spacer"),n("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){return e.subscribeNewTopic()}}},[e._v("\n                    Add\n                ")])],1)],1)],1)],1)},pe=[],me=(n("7514"),n("35ef")),fe=n("8ff3"),he={name:"SubscribePanel",props:{demonstrations:Array,subscribedTopics:Array,selectedDemoIndex:Number,oldValuesTab:Array},data:function(){return{popUpSubscribe:0,parametersMap:new fe,topicOriginal:"",topicSubscribe:"",addTopic:0,newTopicSubscription:"",defaultMap:new fe,topicSubscribed:[],oldValues:[{key:"{{test}}",value:"{{test}}"}]}},watch:{topicSubscribed:function(){this.$emit("subscribedTopics",this.topicSubscribed)},selectedDemoIndex:function(){for(var e=document.getElementsByClassName("checkboxes"),t=0;t<e.length;t++)"checkbox"==e[t].type&&(e[t].checked=!1)},oldValues:function(){this.$emit("oldValuesTab",this.oldValues)},oldValuesTab:function(){this.oldValues=this.oldValuesTab}},methods:{replaceText:function(){for(var e=this,t=0;t<this.parametersMap.size;t++){this.demonstrations.some(function(n){n.action.forEach(function(n){n.topicOriginal==e.topicOriginal&&(n.topicSubscribe=e.topicSubscribe.replace(e.parametersMap.keys()[t],e.parametersMap.values()[t]),e.topicSubscribe=n.topicSubscribe)})});var n=new Object,s=1;n.key=this.parametersMap.keys()[t],n.value=this.parametersMap.values()[t];for(var o=0;o<this.oldValues.length;o++)this.oldValues[t].key==n.key&&(this.oldValues[t].value=this.parametersMap.values()[t],s=0);s&&this.oldValues.push(n)}this.popUpSubscribe=0,this.parametersMap=new fe,this.defaultMap=new fe},showPopUpSubscribe:function(e){var t,n=this;0==!document.getElementById(e.name).checked?function(){e.isSelected=!0,document.getElementById(e.name).checked=!0;var s=/{{([a-zA-Z0-9]*)}}/gm;n.topicSubscribe=e.topicOriginal,n.topicOriginal=e.topicOriginal,e.topicSubscribe=e.topicOriginal;var o=me(e.topicOriginal,s).toArray();for(t=0;t<o.length;t++)n.parametersMap.set("{{"+o[t]+"}}","{{"+o[t]+"}}"),n.defaultMap.set("{{"+o[t]+"}}",e.parametersTopics.filter(function(e){return e.parameter=="{{"+o[t]+"}}"})[0].parameterDefaultValue);n.parametersMap.size>0&&(n.popUpSubscribe=1)}():(document.getElementById(e.name).checked=!1,e.isSelected=!1)},subscribeTopic:function(){var e=this;this.demonstrations[this.selectedDemoIndex].action.forEach(function(t){if(t.isSelected){Object(T["subscribeMQTT"])(t.topicSubscribe);var n=0;e.topicSubscribed.find(function(e){return e==t.topicSubscribe&&(n=1),n}),n?console.log("coucou"):e.topicSubscribed.push(t.topicSubscribe)}t.isSelected=!1,document.getElementById(t.name).checked=!1})},subscribeNewTopic:function(){if(this.newTopicSubscription.length>0){var e=0,t=this.newTopicSubscription;""!=t&&(this.topicSubscribed.find(function(n){return n==t&&(e=1),e}),e||this.topicSubscribed.push(t),Object(T["subscribeMQTT"])(this.newTopicSubscription)),this.cancelNewTopicSubscribtion()}else alert("Fill new topic name!")},setDefaultValue:function(e){this.parametersMap.set(this.parametersMap.keys()[e-1],this.defaultMap.values()[e-1]),this.$refs.parameterContentTopic[e-1].value=this.defaultMap.values()[e-1]},setValue:function(e,t){this.parametersMap.set(this.parametersMap.keys()[e-1],t),this.$refs.parameterContentTopic[e-1].value=t},cancelNewTopicSubscribtion:function(){this.newTopicSubscription="",this.addTopic=0},setOldValue:function(e,t){var n=this.findOldValue(t);this.parametersMap.set(this.parametersMap.keys()[t-1],n),this.$refs.parameterContentTopic[t-1].value=n},findOldValue:function(e){for(var t="",n=0;n<this.oldValues.length;n++)this.oldValues[n].key==this.parametersMap.keys()[e-1]&&(t=this.oldValues[n].value,this.parametersMap.set(this.oldValues[n].key,t));return t}}},ve=he,be=Object(u["a"])(ve,ue,pe,!1,null,null,null),ge=be.exports;m()(be,{VBtn:f["a"],VCard:P["a"],VCardActions:M["a"],VCardTitle:D["a"],VDialog:k["a"],VExpansionPanel:Z["a"],VExpansionPanelContent:Y["a"],VFlex:R["a"],VForm:C["a"],VIcon:h["a"],VSpacer:V["a"],VTextField:U["a"],VTooltip:ce["a"]});var xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-flex",{attrs:{"d-flex":"","offset-md1":"",md10:""}},[n("v-flex",{attrs:{md6:"",xs6:""}},[n("v-expansion-panel",[n("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[n("div",{staticClass:"strongTexts"},[e._v("Add Demonstration")])]},proxy:!0}])},[n("v-flex",{attrs:{"offset-md1":"",md10:""}},[n("br"),n("v-form",{on:{submit:function(e){e.preventDefault()}}},[n("v-text-field",{attrs:{label:"Demonstration Name",box:""},model:{value:e.newDemoName,callback:function(t){e.newDemoName=t},expression:"newDemoName"}}),n("div",{staticClass:"userGroups"},e._l(e.userGroups,function(t){return n("v-flex",{attrs:{xs5:"","offset-xs1":""}},[n("input",{staticClass:"checkboxesInAddingPanel",attrs:{type:"checkbox",id:t.id},on:{click:function(e){t.isSelected=!t.isSelected}}}),n("div",{attrs:{slot:"label"},slot:"label"},[e._v("\n                                    "+e._s(t.name)+"\n                                ")])])}),1),n("br"),n("v-flex",[n("v-btn",{staticClass:"addButton",attrs:{type:"submit",color:"rgba(0,103,160,1)"},on:{click:function(t){return e.addDemo()}}},[n("div",{staticClass:"button"},[e._v("ADD DEMO")])])],1)],1)],1)],1)],1)],1),n("v-flex",{attrs:{"offset-md1":"",md6:"",xs6:"","offset-xs1":""}},[null!=e.selected?n("v-expansion-panel",[n("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[n("div",{staticClass:"strongTexts"},[e._v("Add Action")])]},proxy:!0}],null,!1,1363516682)},[n("v-flex",{attrs:{"offset-md1":"",md10:"","offset-xs1":""}},[n("br"),n("v-form",{on:{submit:function(e){e.preventDefault()}}},[n("v-text-field",{attrs:{label:"Action Name",box:""},model:{value:e.newActionName,callback:function(t){e.newActionName=t},expression:"newActionName"}}),n("v-text-field",{attrs:{label:"Action Topic",box:""},model:{value:e.newActionTopic,callback:function(t){e.newActionTopic=t},expression:"newActionTopic"}}),n("v-textarea",{attrs:{label:"Action Message",box:""},model:{value:e.newActionMessage,callback:function(t){e.newActionMessage=t},expression:"newActionMessage"}}),n("v-flex",[n("v-btn",{staticClass:"addButton",attrs:{type:"submit",color:"rgba(0,103,160,1)"},on:{click:function(t){return e.addAction()}}},[n("div",{staticClass:"button"},[e._v("ADD ACTION")])])],1)],1)],1)],1)],1):e._e(),n("v-dialog",{attrs:{width:"500",persistent:""},scopedSlots:e._u([{key:"activator",fn:function(e){e.on}}]),model:{value:e.popUpMessage,callback:function(t){e.popUpMessage=t},expression:"popUpMessage"}},[n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v("\n                    Fill default parameters for Message\n                ")]),n("br"),n("v-form",{on:{submit:function(e){e.preventDefault()}}},[e._l(e.parametersMap.size,function(t){return n("v-flex",{attrs:{"d-flex":""}},[n("v-flex",{attrs:{md3:"","offset-md1":"","offset-xs1":""}},[n("div",{staticClass:"parameters"},[e._v("\n                                "+e._s(e.parametersMap.keys()[t-1])+"\n                            ")])]),n("v-flex",{attrs:{md6:"","d-flex":""}},[n("v-text-field",{attrs:{solo:""},model:{value:e.newDefaultValues[t-1],callback:function(n){e.$set(e.newDefaultValues,t-1,n)},expression:"newDefaultValues[index-1]"}})],1)],1)}),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{type:"submit",color:"primary",flat:""},on:{click:function(t){return e.setDefaultParams("message")}}},[e._v("\n                            Apply\n                        ")])],1)],2)],1)],1),n("v-dialog",{attrs:{width:"500",persistent:""},scopedSlots:e._u([{key:"activator",fn:function(e){e.on}}]),model:{value:e.popUpTopic,callback:function(t){e.popUpTopic=t},expression:"popUpTopic"}},[n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v("\n                    Fill default parameters for Topic\n                ")]),n("br"),n("v-form",{on:{submit:function(e){e.preventDefault()}}},[e._l(e.parametersMap.size,function(t){return n("v-flex",{attrs:{"d-flex":""}},[n("v-flex",{attrs:{md3:"","offset-md1":"","offset-xs1":""}},[n("div",{staticClass:"parameters"},[e._v("\n                                "+e._s(e.parametersMap.keys()[t-1])+"\n                            ")])]),n("v-flex",{attrs:{md6:"","d-flex":""}},[n("v-text-field",{attrs:{solo:""},model:{value:e.newDefaultValues[t-1],callback:function(n){e.$set(e.newDefaultValues,t-1,n)},expression:"newDefaultValues[index-1]"}})],1)],1)}),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{type:"submit",color:"primary",flat:""},on:{click:function(t){return e.setDefaultParams("topic")}}},[e._v("\n                            Apply\n                        ")])],1)],2)],1)],1),n("v-dialog",{staticClass:"headline grey lighten-2",attrs:{"primary-title":"","max-width":"200"},scopedSlots:e._u([{key:"activator",fn:function(e){e.on}}]),model:{value:e.addedPopUp,callback:function(t){e.addedPopUp=t},expression:"addedPopUp"}},[n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v("\n                    "+e._s(e.type)+" added\n                ")]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){e.addedPopUp=!1}}},[e._v("\n                        Close\n                    ")])],1)],1)],1)],1)],1)},we=[],_e=n("8ff3"),Te={name:"AddingPanel",props:{selected:Object,userGroups:Array,demonstrations:Array,selectedActionIndex:Number,selectedDemoIndex:Number},data:function(){return{newDemoName:"",newActionName:"",newActionTopic:"",newActionMessage:"",userGroupList:"",parametersMap:new _e,parametersIds:new _e,popUpMessage:0,popUpTopic:0,newDefaultValues:[],addedPopUp:!1,type:""}},methods:{addDemo:function(){for(var e=this,t=document.getElementsByClassName("checkboxesInAddingPanel"),n=0;n<t.length;n++)"checkbox"==t[n].type&&(t[n].checked=!1);this.newDemoName.length>0?(this.userGroups.forEach(function(t){1==t.isSelected&&(e.userGroupList=e.userGroupList+t.id+"|",t.isSelected=!1)}),this.userGroupList.length>0?O.a.post(T["config"].baseLink+"/demo/addDemo?name="+encodeURI(this.newDemoName)+"&userGroupsIds="+encodeURI(this.userGroupList)+"&adminId="+localStorage.getItem("WLDDMQ_id")).then(function(t){e.$parent.update(),e.newDemoName="",e.userGroupList="",e.type="Demonstration",e.addedPopUp=!0},function(e){console.log("erreur",e)}):alert("Select demonstration user groups!")):alert("Fill demonstration name!")},addAction:function(){var e=this;this.newActionName.length>0&&this.newActionTopic.length>0?O.a.post(T["config"].baseLink+"/action/addAction?demoId="+this.selected.id+"&name="+encodeURI(this.newActionName)+"&topic="+encodeURI(this.newActionTopic)+"&message="+encodeURI(this.newActionMessage)+"&adminId="+localStorage.getItem("WLDDMQ_id")).then(function(t){e.$parent.update(function(){e.showParamsPopUp("topic",e.$parent.demonstrations)})},function(e){console.log("erreur",e)}):alert("Fill action name and topic!")},showParamsPopUp:function(e,t){var n,s=this,o=/\{\{[a-zA-Z0-9]*\}\}/gm;"topic"==e?n=this.newActionTopic.matchAll(o):"message"==e&&(n=this.newActionMessage.matchAll(o));var a=!0,i=!1,r=void 0;try{for(var c,l=function(){var n=c.value;s.parametersMap.set(n[0],n[0]),"topic"==e?s.parametersIds.set(n[0],t[s.selectedDemoIndex].action.filter(function(e){return e.topic==s.newActionTopic&&e.name==s.newActionName})[0].parametersTopics.filter(function(e){return e.parameter==n[0]})[0].id):"message"==e&&s.parametersIds.set(n[0],t[s.selectedDemoIndex].action.filter(function(e){return e.message==s.newActionMessage&&e.name==s.newActionName})[0].parametersMessages.filter(function(e){return e.parameter==n[0]})[0].id)},d=n[Symbol.iterator]();!(a=(c=d.next()).done);a=!0)l()}catch(u){i=!0,r=u}finally{try{a||null==d.return||d.return()}finally{if(i)throw r}}this.parametersMap.size>0?"topic"==e?this.popUpTopic=1:"message"==e&&(this.popUpMessage=1):"topic"==e?this.$parent.update(function(){s.showParamsPopUp("message",s.$parent.demonstrations)}):this.showAddedPopUp()},closeParamEditing:function(){this.popUpTopic=0,this.popUpMessage=0,this.parametersMap=new _e,this.parametersIds=new _e,this.newDefaultValues=[]},setDefaultParams:function(e){for(var t=this,n=new Array,s=0;s<this.parametersIds.size;s++){var o=new Object;o.id=this.parametersIds.values()[s],o.value=this.newDefaultValues[s],n.push(o)}O.a.post(T["config"].baseLink+"/parameters/addAllParametersDefaultValues?jsonString="+encodeURI(JSON.stringify(n))).then(function(n){"topic"==e?(t.$parent.update(function(){t.showParamsPopUp("message",t.$parent.demonstrations)}),t.closeParamEditing()):(t.$parent.update(),t.closeParamEditing(),t.showAddedPopUp())},function(e){console.log("erreur",e)})},showAddedPopUp:function(){this.newActionName="",this.newActionMessage="",this.newActionTopic="",this.type="Action",this.addedPopUp=!0}}},Ae=Te,ye=Object(u["a"])(Ae,xe,we,!1,null,null,null),Ie=ye.exports;m()(ye,{VBtn:f["a"],VCard:P["a"],VCardActions:M["a"],VCardTitle:D["a"],VDialog:k["a"],VExpansionPanel:Z["a"],VExpansionPanelContent:Y["a"],VFlex:R["a"],VForm:C["a"],VSpacer:V["a"],VTextField:U["a"],VTextarea:K["a"]});var Pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{row:"","justify-center":""}},[n("v-flex",{attrs:{xs12:"",sm12:"",md10:""}},[n("v-card",[n("v-toolbar",[n("v-toolbar-title",[e._v("\n                    Message\n                ")]),n("v-spacer"),n("v-btn",{attrs:{color:"rgba(0,103,160,1)",small:"",fab:""},on:{click:function(t){e.showTopicsSubscribed=1}}},[n("div",{staticClass:"button"},[e._v(e._s(e.subscribedTopics.length))])]),n("v-btn",{attrs:{color:"rgba(0,103,160,1)"},on:{click:function(t){return e.clearAll()}}},[n("div",{staticClass:"button"},[e._v("Clear all ("+e._s(e.messagesReceived.length)+")")])])],1),n("v-list",[e._l(e.messagesReceived,function(t,s){return[n("v-list-tile",{key:s,style:"border-left:solid "+t.color+" 5px;",attrs:{avatar:"",ripple:""},on:{click:function(n){return e.selectMessage(t)}}},[n("v-list-tile-content",{on:{click:function(t){e.dialog=!0}}},[n("v-list-tile-title",{staticClass:"inboxContent"},[e._v(e._s(t.topic))]),n("v-list-tile-sub-title",{staticClass:"inboxContent"},[e._v("\n                                "+e._s(t.message)+"\n                            ")])],1),n("v-list-tile-action",[n("v-list-tile-action-text",[e._v("QoS : "+e._s(t.options.qos)+"     "+e._s(t.date))]),n("v-flex",{staticClass:"retainedAndClearButton",attrs:{"d-flex":""}},[1==t.options.retain?n("v-list-tile-action-text",[e._v("Retained   ")]):e._e(),n("v-icon",{staticClass:"iconButton",on:{click:function(t){return e.clearMessage(s)}}},[e._v("\n                                    remove_circle\n                                ")])],1)],1)],1),s+1<e.messagesReceived.length?n("v-divider",{key:"divider-"+s}):e._e()]})],2)],1),n("v-dialog",{attrs:{width:"700",persistent:""},scopedSlots:e._u([{key:"activator",fn:function(e){e.on}}]),model:{value:e.showTopicsSubscribed,callback:function(t){e.showTopicsSubscribed=t},expression:"showTopicsSubscribed"}},[n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v("\n                    Topics you subscribed at\n                ")]),n("div",{staticClass:"topicList"},e._l(e.subscribedTopicsTab,function(t,s){return n("v-flex",{attrs:{"d-flex":""}},[n("div",{staticClass:"topicInList"},[n("strong",{staticStyle:{"font-size":"20px"}},[e._v(".")]),e._v(e._s(t)+"\n                            "),n("v-icon",{staticClass:"unsubscribe",on:{click:function(n){return e.unsubscribe(t,s)}}},[e._v("\n                                remove_circle\n                            ")])],1)])}),1),n("v-card-actions",[n("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){e.showTopicsSubscribed=0}}},[e._v("\n                        Cancel\n                    ")])],1)],1)],1)],1),n("ShowMessagePopUp",{attrs:{dialog:e.dialog,selectedMessage:e.selectedMessage},on:{dialog:function(t){e.dialog=t}}})],1)},Me=[],De=function(){var e=this,t=e.$createElement,n=e._self._c||t;return null!=e.selectedMessage?n("v-dialog",{attrs:{width:"1000"},scopedSlots:e._u([{key:"activator",fn:function(e){e.on}}],null,!1,2612987011),model:{value:e.messageDialog,callback:function(t){e.messageDialog=t},expression:"messageDialog"}},[n("v-card",[n("v-card-text",{staticClass:"headline grey lighten-2"},[n("div",[n("span",{attrs:{id:"messageDatePopUp"}},[e._v("Date : "+e._s(e.selectedMessage.date))]),n("div",{attrs:{id:"messageTopicPopUp"}},[e._v("Topic : "+e._s(e.selectedMessage.topic))])])]),n("v-card-text",[n("div",[123==e.selectedMessage.message[0]||91==e.selectedMessage.message[0]?n("pre",{staticClass:"messagePopUp"},[e._v(e._s(e.formatJson(e.selectedMessage.message)))]):n("div",{staticClass:"messagePopUp"},[e._v(e._s(e.formatJson(e.selectedMessage.message)))])])]),n("v-divider"),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){e.messageDialog=!1}}},[e._v("\n                CLOSE\n            ")])],1)],1)],1):e._e()},ke=[],Ce={name:"ShowMessagePopUp",props:{selectedMessage:Object,dialog:Boolean},data:function(){return{messageDialog:this.dialog}},watch:{messageDialog:function(){this.$emit("dialog",this.messageDialog)},dialog:function(){this.messageDialog=this.dialog}},methods:{formatJson:function(e){return 123==e[0]||91==e[0]?JSON.stringify(JSON.parse(e),null,4):e}}},Se=Ce,Ve=n("ce7e"),Ue=Object(u["a"])(Se,De,ke,!1,null,null,null),Ee=Ue.exports;m()(Ue,{VBtn:f["a"],VCard:P["a"],VCardActions:M["a"],VCardText:M["b"],VDialog:k["a"],VDivider:Ve["a"],VSpacer:V["a"]});var Le={name:"Inbox",components:{ShowMessagePopUp:Ee},props:{subscribedTopics:Array},data:function(){return{messagesReceived:[],dialog:!1,selectedMessage:null,showTopicsSubscribed:0,subscribedTopicsTab:this.subscribedTopics}},mounted:function(){var e=this;Object(T["getMessage"])(function(t,n,s){var o={message:n,topic:t,options:s,date:Object(T["returnDate"])(),color:Object(T["stringToRGB"])(t)};e.messagesReceived.unshift(o)})},watch:{subscribedTopicsTab:function(){this.$emit("subscribedTopics",this.subscribedTopicsTab)},subscribedTopics:function(){this.subscribedTopicsTab=this.subscribedTopics}},methods:{clearAll:function(){this.messagesReceived=new Array},clearMessage:function(e){this.messagesReceived.splice(e,1),this.selectedMessage=null},selectMessage:function(e){this.selectedMessage=e},unsubscribe:function(e,t){Object(T["unsubscribeMQTT"])(e),this.subscribedTopicsTab.splice(t,1)}}},Ne=Le,Oe=n("8860"),$e=n("ba95"),je=n("40fe"),Be=n("5d23"),Ge=n("71d9"),Re=n("2a7f"),Fe=Object(u["a"])(Ne,Pe,Me,!1,null,null,null),Qe=Fe.exports;m()(Fe,{VBtn:f["a"],VCard:P["a"],VCardActions:M["a"],VCardTitle:D["a"],VDialog:k["a"],VDivider:Ve["a"],VFlex:R["a"],VIcon:h["a"],VLayout:re["a"],VList:Oe["a"],VListTile:$e["a"],VListTileAction:je["a"],VListTileActionText:Be["a"],VListTileContent:Be["b"],VListTileSubTitle:Be["c"],VListTileTitle:Be["d"],VSpacer:V["a"],VToolbar:Ge["a"],VToolbarTitle:Re["a"]});n("6281");var ze={name:"Body",components:{ConnectionPopUp:L,Selector:Q,ActionPanel:ee,PublishPanel:de,SubscribePanel:ge,AddingPanel:Ie,Inbox:Qe},data:function(){return{publishPanel:null,actionPanel:null,messageToSend:"",topic:"",connection:!0,selected:null,demonstrations:[],userGroups:[],selectedUserGroup:{id:1,isSelected:!1,name:"WLDD"},actualTopic:"",actualMessage:"",selectedDemoIndex:null,selectedActionIndex:null,popUps:null,deletePopUp:!1,editPopUp:!1,showBtn:0,subscribedTopics:[],oldValuesTab:[{key:"{{test}}",value:"{{test}}"}]}},watch:{selected:function(){this.topic="",this.messageToSend=""}},mounted:function(){var e=this;O.a.get(T["config"].baseLink+"/user/findAll").then(function(t){e.userGroups=[],e.userGroups=t.data;for(var n=0;n<e.userGroups.length;n++)e.userGroups[n].isSelected=!1},function(e){console.log("erreur",e)})},methods:{update:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;O.a.get(T["config"].baseLink+"/demo/findByUserGroupId?userGroupId="+this.selectedUserGroup.id).then(function(n){e.demonstrations=[],e.demonstrations=n.data;for(var s=0;s<e.demonstrations.length;s++)for(var o=0;o<e.demonstrations[s].action.length;o++)e.demonstrations[s].action[o].demo=e.selected,e.demonstrations[s].action[o].isSelected=!1,e.demonstrations[s].action[o].topicSubscribe=e.demonstrations[s].action[o].topic,e.demonstrations[s].action[o].topicOriginal=e.demonstrations[s].action[o].topic,e.demonstrations[s].action[o].messageOriginal=e.demonstrations[s].action[o].message,e.demonstrations[s].action[o].messageOriginal=e.demonstrations[s].action[o].message;null!=e.selected&&(e.selected=e.demonstrations.filter(function(t){return t.id==e.selected.id})[0]),null!=t&&t()},function(e){console.log("erreur",e)})},assignTopic:function(e){this.topic=e.topic,this.actualTopic=e.topicOriginal,this.messageToSend=e.message,this.actualMessage=e.messageOriginal,this.publishPanel=0,this.selectedActionIndex=this.demonstrations[this.selectedDemoIndex].action.indexOf(e),this.popUps=1,this.showBtn=1}}},Je=ze,We=Object(u["a"])(Je,g,x,!1,null,null,null),qe=We.exports;m()(We,{VFlex:R["a"],VLayout:re["a"]});var He=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"Footer"},[n("div",{attrs:{color:"rgb(46,46,64)"}}),n("div",{staticClass:"strongTexts",attrs:{id:"version"}},[n("span",{staticClass:"clickableFooter",on:{click:function(t){e.showChangeLogs=1}}},[e._v("\n            VERSION : 2.1 BETA\n        ")]),n("a",{attrs:{href:"mailto:dl-fr-awl-wldd@worldline.com"}},[e._v("\n            dl-fr-awl-wldd@worldline.com\n        ")])]),n("v-dialog",{attrs:{width:"500"},scopedSlots:e._u([{key:"activator",fn:function(e){e.on}}]),model:{value:e.showChangeLogs,callback:function(t){e.showChangeLogs=t},expression:"showChangeLogs"}},[n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v("\n                Changelogs\n            ")]),n("v-card-text",[n("div",{staticStyle:{"font-weight":"bold"}},[e._v("2.1")]),e._v("\n                -Ajout d'un bouton logout dassos\n                "),n("br"),e._v("\n                -Les checkboxs sont pré-cochées lors de l'édition d'une démonstration\n                "),n("div",{staticStyle:{"font-weight":"bold"}},[e._v("2.0")]),e._v("\n                -Ajout des fonctionnalités d'import et d'export d'action au format JSON\n                "),n("br"),e._v("\n                -Ajout de la possibilité de se désabonner d'un topic\n                "),n("div",{staticStyle:{"font-weight":"bold"}},[e._v("1.9")]),e._v("\n                -Résolution du bug d'export de démonstration\n                "),n("br"),e._v("\n                -Les ids ne sont plus affichées à l'import d'une démonstration\n                "),n("div",{staticStyle:{"font-weight":"bold"}},[e._v("1.8")]),e._v("\n                -Résolution du bug de popUp sur IOS\n                "),n("br"),e._v("\n                -Ajout de la persistence des valeurs par défaut à l'édition d'une action\n                "),n("br"),e._v("\n                -Ajouts de l'enregistrement de l'ID et de la date lors de la création et l'édition d'une action\n                "),n("br"),e._v("\n                -Réparation de bug lié à la connection dasso\n                "),n("div",{staticStyle:{"font-weight":"bold"}},[e._v("1.7")]),e._v("\n                -Ajout de la connection dasso au lancement de la page\n                "),n("div",{staticStyle:{"font-weight":"bold"}},[e._v("1.6")]),e._v("\n                -Le formattage des tableaux de JSON est maintenant géré\n                "),n("br"),e._v("\n                -Résolution du bug des paramètres pour les topics à plusieurs paramètres\n                "),n("div",{staticStyle:{"font-weight":"bold"}},[e._v("1.5")]),e._v("\n                -Ajout des fonctionnalités d'import et d'export de démonstration au format JSON\n                "),n("br"),e._v("\n                -Ajout de la persistance des valeurs pour les abonnements29/1\n                "),n("div",{staticStyle:{"font-weight":"bold"}},[e._v("1.4")]),e._v("\n                -Ajout de la possibilité de supprimer et d'éditer une démonstration\n                "),n("br"),e._v("\n                -Ajout d'un système de persistance des anciennes valeurs par défaut des paramètres\n                "),n("br"),e._v("\n                -L'affichage des messages gère les sous Json\n                "),n("br"),e._v("\n                -Réparation d'un bug d'encodage URI des paramètres\n                "),n("br"),e._v("\n                -Réparation d'un bug de formatage de JSON\n                "),n("br"),e._v("\n                -L'édition de paramètre se fait maintenant en une simple requête au lieu d'une par paramètre\n                "),n("br"),n("div",{staticStyle:{"font-weight":"bold"}},[e._v("1.3")]),e._v("\n                -Ajout d'une pop-up de confirmation a l'ajout d'une démonstration ou d'une action\n                "),n("br"),e._v("\n                -Réparation du bug des checkbox qui restent cochées après avoir changé de démonstration\n                "),n("br"),e._v("\n                -Ajout de la fonction submit au moment d'une édition\n                "),n("br"),e._v("\n                -Ajout de la possibilité de voir les topics auxquels on s'est abonné\n                "),n("br"),e._v("\n                -Ajout de la possibilité de voir le QoS d'un message et de savoir s'il est retained\n                "),n("br"),e._v("\n                -Réparation du bug d'affichage des topics et messages trop long dans l'inbox et dans la pop-up message\n                "),n("br"),e._v("\n                -Ajout d'un bouton Refresh dans le header de la page\n                "),n("div",{staticStyle:{"font-weight":"bold"}},[e._v("1.2")]),e._v("\n                -Possibilité de changer l'ordre des actions affichées\n                "),n("br"),e._v("\n                -Ajout d'un bouton Cancel au Topic Subscribtion\n                "),n("div",{staticStyle:{"font-weight":"bold"}},[e._v("1.1")]),e._v("\n                -Ajout des groupes utilisateurs pour filtrer les démonstrations affichées\n                "),n("br"),e._v("\n                -Possibilité de supprimer une action\n                "),n("br"),e._v("\n                -Possibilité d'éditer une action\n                "),n("br"),e._v("\n                -Possibilité de définir les valeurs par défaut des paramètres à la création de l'action\n                "),n("br"),n("div",{staticStyle:{"font-weight":"bold"}},[e._v("1.0")]),e._v("\n                -Import des démonstrations et des actions de la BDD\n                "),n("br"),e._v("\n                -Possibilité d'interagir avec le Broker MQTT (Publication/Réception)\n                "),n("br"),e._v("\n                -Possibilité de s'abonner à des topics\n                "),n("br"),e._v("\n                -Détection des paramètres des topics et des messages\n                "),n("br"),e._v("\n                -Possibilité d'ajouter des actions ou des démonstrations\n                "),n("br"),e._v("\n                -Affichage des messages reçus sur les topics auxquels on s'est abonné\n                "),n("br"),e._v("\n                -Possibilité d'afficher un message en format JSON\n                "),n("br"),e._v("\n                -Possibilité de vider l'inbox de réception de message\n            ")]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){e.showChangeLogs=0}}},[e._v("\n                    Close\n                ")])],1)],1)],1)],1)},Ze=[],Ye={name:"Footer",data:function(){return{showChangeLogs:0}}},Ke=Ye,Xe=Object(u["a"])(Ke,He,Ze,!1,null,null,null),et=Xe.exports;m()(Xe,{VBtn:f["a"],VCard:P["a"],VCardActions:M["a"],VCardText:M["b"],VCardTitle:D["a"],VDialog:k["a"],VSpacer:V["a"]});var tt={WLDDMQ_URL:"http://wldd-mq-ws-bo-wldd.qlf.co.as8677.net",OAUTH2_SERVER:"https://dasso.kzn.as8677.net",CLIENT_CALLBACK:"http://wldd-mq-ws-bo-wldd.qlf.co.as8677.net/admin/token",CLIENT_ID:"bbae065448d09a9c12363e15fc596876c7f15e28"},nt={name:"App",components:{Header:b,Body:qe,Footer:et},data:function(){return{isLogged:!1}},created:function(){this.configAxios(),this.dassoLogin()},methods:{configAxios:function(){O.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",O.a.defaults.headers.common["env"]="WLDDMQ";var e=localStorage.getItem("WLDDMQ_token");Object(T["isNotNull"])(e)&&(O.a.defaults.headers.common["authorization"]="Bearer "+e)},dassoLogin:function(){var e=this,t=localStorage.getItem("WLDDMQ_token"),n=this.$route.query.logout,s=this.$route.query.adminComplexId,o=!1;if(Object(T["isNotNull"])(t))O.a.get(tt.WLDDMQ_URL+"/version").then(function(t){401==t.status?(localStorage.removeItem("WLDDMQ_token"),o=!0,e.isLogged=!1):e.isLogged=!0});else if(Object(T["isNotNull"])(s)){localStorage.removeItem("WLDDMQ_token");var a=new URLSearchParams;a.append("adminComplexId",s),O.a.post(tt.WLDDMQ_URL+"/admin/authenticate",a).then(function(t){200==t.status?(e.isLogged=!0,localStorage.setItem("WLDDMQ_token",t.data.token),localStorage.setItem("WLDDMQ_das",t.data.das),localStorage.setItem("WLDDMQ_name",t.data.name),localStorage.setItem("WLDDMQ_email",t.data.email),localStorage.setItem("WLDDMQ_isAdmin",t.data.isAdmin),localStorage.setItem("WLDDMQ_id",t.data.id),e.isLogged=!0,e.$router.push("/")):alert("Error on get token")})}else if(Object(T["isNotNull"])(n)&&"true"==n){var i=tt.CLIENT_ID,r=encodeURI(tt.CLIENT_CALLBACK),c=tt.OAUTH2_SERVER+"/authorize.php?client_id="+i+"&response_type=code&redirect_uri="+r;window.location.replace(c)}else o=!0,e.isLogged=!1;o&&this.dassoLogout()},dassoLogout:function(){var e=tt.OAUTH2_SERVER+"/login.php?action=logout&redirect="+encodeURI(window.location.href+"?logout=true");window.location.replace(e)}},watch:{$route:function(){this.configAxios(),this.dassoLogin()}}},st=nt,ot=n("7496"),at=n("a523"),it=n("549c"),rt=Object(u["a"])(st,a,i,!1,null,null,null),ct=rt.exports;m()(rt,{VApp:ot["a"],VContainer:at["a"],VContent:it["a"]});n("4d1a");var lt=n("8c4f");s["a"].use(lt["a"]);var dt=new lt["a"]({mode:"history",base:"/"});new s["a"]({router:dt,render:function(e){return e(ct)}}).$mount("#app")},6281:function(e,t,n){"use strict";n.r(t),n.d(t,"config",function(){return o}),n.d(t,"returnDate",function(){return a}),n.d(t,"nbChar",function(){return i}),n.d(t,"connectMQTT",function(){return c}),n.d(t,"getMessage",function(){return l}),n.d(t,"publishMQTT",function(){return d}),n.d(t,"subscribeMQTT",function(){return u}),n.d(t,"unsubscribeMQTT",function(){return p}),n.d(t,"stringToRGB",function(){return m}),n.d(t,"isNotNull",function(){return f});n("6b54"),n("3b2b"),n("4917"),n("f576");var s=n("e7fc"),o={baseLink:"http://wldd-mq-ws-bo-wldd.qlf.co.as8677.net/"};function a(){var e=new Date,t=String(e.getSeconds()).padStart(2,"0"),n=String(e.getMinutes()).padStart(2,"0"),s=String(e.getHours()).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),i=e.getFullYear();return e=o+"/"+a+"/"+i+"-"+s+":"+n+":"+t,e}function i(e,t){return e.match(new RegExp(t,"gi")).length}var r=null;function c(e,t,n,o,a,i){var c={host:e,username:t,password:n,port:o,connectTimeout:1e3};r=s.connect(c),r.on("connect",function(e){a()}),r.on("offline",function(e){i()})}function l(e){null!=r?r.on("message",function(t,n,s){e(t,n,s)}):console.log("client null")}function d(e,t,n){r.publish(e,t,n)}function u(e){r.subscribe(e,function(e){e&&console.log("Error:"+e)})}function p(e){r.unsubscribe(e,function(e){e&&console.log("Error:"+e)})}function m(e){for(var t=0,n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);var s="#";for(n=0;n<3;n++){var o=t>>8*n&255;s+=("00"+o.toString(16)).substr(-2)}return s}function f(e){return null!=e&&""!=e&&"undefined"!=e&&"-1"!=e}},cf05:function(e,t,n){e.exports=n.p+"img/logo.cefed055.png"}});
//# sourceMappingURL=app.6922930e.js.map